2025-12-25 22:58:49,487 - app - INFO - Root endpoint accessed
2025-12-25 22:58:49,492 - app - INFO - Request: GET / - Status: 200 - Duration: 7.49ms
2025-12-25 22:58:49,492 - uvicorn.access - INFO - 127.0.0.1:41638 - "GET / HTTP/1.1" 200
2025-12-25 22:58:49,500 - app - INFO - Request: GET /test-error - Status: 404 - Duration: 0.82ms
2025-12-25 22:58:49,500 - uvicorn.access - INFO - 127.0.0.1:41638 - "GET /test-error HTTP/1.1" 404
2025-12-25 22:58:56,909 - uvicorn.error - INFO - Shutting down
2025-12-25 22:58:57,013 - uvicorn.error - INFO - Waiting for application shutdown.
2025-12-25 22:58:57,013 - app - INFO - Shutting down application...
2025-12-25 22:58:57,013 - uvicorn.error - INFO - Application shutdown complete.
2025-12-25 22:58:57,013 - uvicorn.error - INFO - Finished server process [140001]
2025-12-25 22:59:36,193 - app - CRITICAL - Failed to start application: Simulated startup failure!
2025-12-25 22:59:36,194 - app - CRITICAL - Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 17, in <module>
    import app.broken_module # This will crash
    ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/broken_module.py", line 1, in <module>
    raise RuntimeError("Simulated startup failure!")
RuntimeError: Simulated startup failure!

2025-12-30 20:14:14,899 - uvicorn.error - INFO - Started server process [58342]
2025-12-30 20:14:14,899 - uvicorn.error - INFO - Waiting for application startup.
2025-12-30 20:14:14,900 - app - INFO - Starting up application...
2025-12-30 20:14:14,914 - uvicorn.error - INFO - Application startup complete.
2025-12-30 20:15:43,182 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 379.68ms
2025-12-30 20:15:43,182 - uvicorn.access - INFO - 127.0.0.1:42206 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2025-12-30 20:15:44,502 - app - ERROR - Request failed: GET /api/v1/users/me - Duration: 131.92ms - Error: (sqlite3.OperationalError) no such column: prop_firm_registration.service_scope
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-30 20:15:44,544 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlite3.OperationalError: no such column: prop_firm_registration.service_scope

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 641, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/dependencies/auth.py", line 44, in get_current_user
    result = await session.exec(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/ext/asyncio/session.py", line 98, in exec
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 83, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 262, in instances
    _prebuffered = list(chunks(None))
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 247, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1564, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3338, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3414, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: prop_firm_registration.service_scope
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-12-30 20:15:44,544 - uvicorn.access - INFO - 127.0.0.1:42222 - "GET /api/v1/users/me HTTP/1.1" 500
2025-12-30 20:15:44,573 - app - ERROR - Request failed: GET /api/v1/users/me - Duration: 16.64ms - Error: (sqlite3.OperationalError) no such column: prop_firm_registration.service_scope
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-30 20:15:44,607 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlite3.OperationalError: no such column: prop_firm_registration.service_scope

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 641, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/dependencies/auth.py", line 44, in get_current_user
    result = await session.exec(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/ext/asyncio/session.py", line 98, in exec
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 83, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 262, in instances
    _prebuffered = list(chunks(None))
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 247, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1564, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3338, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3414, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: prop_firm_registration.service_scope
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-12-30 20:15:44,611 - uvicorn.access - INFO - 127.0.0.1:42236 - "GET /api/v1/users/me HTTP/1.1" 500
2025-12-30 20:15:44,657 - app - ERROR - Request failed: GET /api/v1/prop-firm - Duration: 29.65ms - Error: (sqlite3.OperationalError) no such column: prop_firm_registration.service_scope
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-30 20:15:44,677 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlite3.OperationalError: no such column: prop_firm_registration.service_scope

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 641, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/dependencies/auth.py", line 44, in get_current_user
    result = await session.exec(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/ext/asyncio/session.py", line 98, in exec
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 83, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 262, in instances
    _prebuffered = list(chunks(None))
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 247, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1564, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3338, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3414, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: prop_firm_registration.service_scope
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-12-30 20:15:44,678 - uvicorn.access - INFO - 127.0.0.1:42238 - "GET /api/v1/prop-firm HTTP/1.1" 500
2025-12-30 20:15:44,704 - app - ERROR - Request failed: GET /api/v1/prop-firm - Duration: 13.80ms - Error: (sqlite3.OperationalError) no such column: prop_firm_registration.service_scope
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-30 20:15:44,714 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlite3.OperationalError: no such column: prop_firm_registration.service_scope

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 641, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/dependencies/auth.py", line 44, in get_current_user
    result = await session.exec(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/ext/asyncio/session.py", line 98, in exec
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 83, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 262, in instances
    _prebuffered = list(chunks(None))
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 247, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1564, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3338, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3414, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: prop_firm_registration.service_scope
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-12-30 20:15:44,715 - uvicorn.access - INFO - 127.0.0.1:42248 - "GET /api/v1/prop-firm HTTP/1.1" 500
2025-12-31 14:08:01,287 - uvicorn.error - INFO - Shutting down
2025-12-31 14:08:01,390 - uvicorn.error - INFO - Waiting for application shutdown.
2025-12-31 14:08:01,391 - app - INFO - Shutting down application...
2025-12-31 14:08:01,392 - uvicorn.error - INFO - Application shutdown complete.
2025-12-31 14:08:01,392 - uvicorn.error - INFO - Finished server process [58342]
2025-12-31 14:08:03,883 - uvicorn.error - INFO - Started server process [252589]
2025-12-31 14:08:03,883 - uvicorn.error - INFO - Waiting for application startup.
2025-12-31 14:08:03,883 - app - INFO - Starting up application...
2025-12-31 14:08:03,892 - uvicorn.error - INFO - Application startup complete.
2025-12-31 14:08:25,496 - uvicorn.error - INFO - Shutting down
2025-12-31 14:08:25,597 - uvicorn.error - INFO - Waiting for application shutdown.
2025-12-31 14:08:25,597 - app - INFO - Shutting down application...
2025-12-31 14:08:25,597 - uvicorn.error - INFO - Application shutdown complete.
2025-12-31 14:08:25,597 - uvicorn.error - INFO - Finished server process [252589]
2025-12-31 14:08:27,012 - uvicorn.error - INFO - Started server process [252934]
2025-12-31 14:08:27,012 - uvicorn.error - INFO - Waiting for application startup.
2025-12-31 14:08:27,013 - app - INFO - Starting up application...
2025-12-31 14:08:27,019 - uvicorn.error - INFO - Application startup complete.
2025-12-31 14:09:15,681 - uvicorn.error - INFO - Shutting down
2025-12-31 14:09:15,782 - uvicorn.error - INFO - Waiting for application shutdown.
2025-12-31 14:09:15,782 - app - INFO - Shutting down application...
2025-12-31 14:09:15,782 - uvicorn.error - INFO - Application shutdown complete.
2025-12-31 14:09:15,783 - uvicorn.error - INFO - Finished server process [252934]
2025-12-31 14:09:17,639 - uvicorn.error - INFO - Started server process [253812]
2025-12-31 14:09:17,639 - uvicorn.error - INFO - Waiting for application startup.
2025-12-31 14:09:17,639 - app - INFO - Starting up application...
2025-12-31 14:09:17,678 - uvicorn.error - INFO - Application startup complete.
2025-12-31 14:10:43,661 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 600.71ms
2025-12-31 14:10:43,661 - uvicorn.access - INFO - 127.0.0.1:44886 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2025-12-31 14:10:45,265 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 202.04ms
2025-12-31 14:10:45,266 - uvicorn.access - INFO - 127.0.0.1:44898 - "GET /api/v1/users/me HTTP/1.1" 200
2025-12-31 14:10:45,430 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 118.58ms
2025-12-31 14:10:45,432 - uvicorn.access - INFO - 127.0.0.1:44908 - "GET /api/v1/users/me HTTP/1.1" 200
2025-12-31 14:10:45,455 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 126.23ms
2025-12-31 14:10:45,456 - uvicorn.access - INFO - 127.0.0.1:44916 - "GET /api/v1/prop-firm HTTP/1.1" 200
2025-12-31 14:10:45,709 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 108.03ms
2025-12-31 14:10:45,709 - uvicorn.access - INFO - 127.0.0.1:44918 - "GET /api/v1/prop-firm HTTP/1.1" 200
2025-12-31 14:13:23,595 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 22.35ms
2025-12-31 14:13:23,595 - uvicorn.access - INFO - 127.0.0.1:44738 - "POST /api/v1/prop-firm HTTP/1.1" 200
2025-12-31 14:13:23,616 - app - INFO - Request: POST /api/v1/payments - Status: 307 - Duration: 0.60ms
2025-12-31 14:13:23,616 - uvicorn.access - INFO - 127.0.0.1:44742 - "POST /api/v1/payments HTTP/1.1" 307
2025-12-31 14:13:23,623 - app - INFO - Request: OPTIONS /api/v1/payments/ - Status: 200 - Duration: 0.50ms
2025-12-31 14:13:23,623 - uvicorn.access - INFO - 127.0.0.1:44746 - "OPTIONS /api/v1/payments/ HTTP/1.1" 200
2025-12-31 14:13:23,631 - app - INFO - Request: POST /api/v1/payments/ - Status: 401 - Duration: 2.67ms
2025-12-31 14:13:23,631 - uvicorn.access - INFO - 127.0.0.1:44748 - "POST /api/v1/payments/ HTTP/1.1" 401
2025-12-31 14:13:33,557 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 508.68ms
2025-12-31 14:13:33,557 - uvicorn.access - INFO - 127.0.0.1:50276 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2025-12-31 14:13:34,949 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 88.61ms
2025-12-31 14:13:34,951 - uvicorn.access - INFO - 127.0.0.1:50284 - "GET /api/v1/users/me HTTP/1.1" 200
2025-12-31 14:13:35,056 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 74.57ms
2025-12-31 14:13:35,060 - uvicorn.access - INFO - 127.0.0.1:50294 - "GET /api/v1/users/me HTTP/1.1" 200
2025-12-31 14:13:35,102 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 32.03ms
2025-12-31 14:13:35,102 - uvicorn.access - INFO - 127.0.0.1:50302 - "GET /api/v1/prop-firm HTTP/1.1" 200
2025-12-31 14:13:35,251 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 22.22ms
2025-12-31 14:13:35,252 - uvicorn.access - INFO - 127.0.0.1:50312 - "GET /api/v1/prop-firm HTTP/1.1" 200
2025-12-31 14:14:30,499 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 19.04ms
2025-12-31 14:14:30,499 - uvicorn.access - INFO - 127.0.0.1:52898 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2025-12-31 14:14:30,559 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 38.33ms
2025-12-31 14:14:30,560 - uvicorn.access - INFO - 127.0.0.1:52902 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2025-12-31 14:19:51,241 - app - INFO - Request: POST /api/v1/auth/login/admin/access-token - Status: 200 - Duration: 676.97ms
2025-12-31 14:19:51,241 - uvicorn.access - INFO - 127.0.0.1:37954 - "POST /api/v1/auth/login/admin/access-token HTTP/1.1" 200
2025-12-31 14:19:53,066 - app - INFO - Request: GET /api/v1/admin/me - Status: 200 - Duration: 13.88ms
2025-12-31 14:19:53,066 - uvicorn.access - INFO - 127.0.0.1:37958 - "GET /api/v1/admin/me HTTP/1.1" 200
2025-12-31 14:19:53,099 - app - INFO - Request: GET /api/v1/admin/me - Status: 200 - Duration: 6.11ms
2025-12-31 14:19:53,100 - uvicorn.access - INFO - 127.0.0.1:37974 - "GET /api/v1/admin/me HTTP/1.1" 200
2025-12-31 14:19:53,114 - app - INFO - Request: GET /api/v1/admin/stats - Status: 200 - Duration: 62.02ms
2025-12-31 14:19:53,115 - uvicorn.access - INFO - 127.0.0.1:37968 - "GET /api/v1/admin/stats HTTP/1.1" 200
2025-12-31 14:19:53,146 - app - INFO - Request: GET /api/v1/admin/stats - Status: 200 - Duration: 15.83ms
2025-12-31 14:19:53,147 - uvicorn.access - INFO - 127.0.0.1:37986 - "GET /api/v1/admin/stats HTTP/1.1" 200
2025-12-31 14:19:58,320 - app - INFO - Request: GET /api/v1/admin/prop-firms - Status: 200 - Duration: 18.53ms
2025-12-31 14:19:58,320 - uvicorn.access - INFO - 127.0.0.1:56282 - "GET /api/v1/admin/prop-firms HTTP/1.1" 200
2025-12-31 14:19:58,357 - app - INFO - Request: GET /api/v1/admin/prop-firms - Status: 200 - Duration: 16.18ms
2025-12-31 14:19:58,358 - uvicorn.access - INFO - 127.0.0.1:56298 - "GET /api/v1/admin/prop-firms HTTP/1.1" 200
2025-12-31 14:20:13,937 - app - ERROR - Request failed: PUT /api/v1/admin/prop-firm/7a66c611-3afe-4161-a219-8e62f21c1f60 - Duration: 25.46ms - Error: cannot access local variable 'user' where it is not associated with a value
2025-12-31 14:20:13,948 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/admin.py", line 113, in update_propfirm_registration
    |     registration = await service.update_registration(registration_id, registration_in, background_tasks)
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/service/propfirm_registration_service.py", line 79, in update_registration
    |     if user:
    |        ^^^^
    | UnboundLocalError: cannot access local variable 'user' where it is not associated with a value
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/admin.py", line 113, in update_propfirm_registration
    registration = await service.update_registration(registration_id, registration_in, background_tasks)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/propfirm_registration_service.py", line 79, in update_registration
    if user:
       ^^^^
UnboundLocalError: cannot access local variable 'user' where it is not associated with a value

2025-12-31 14:20:13,949 - uvicorn.access - INFO - 127.0.0.1:50854 - "PUT /api/v1/admin/prop-firm/7a66c611-3afe-4161-a219-8e62f21c1f60 HTTP/1.1" 500
2025-12-31 14:20:13,966 - app - INFO - Request: GET /api/v1/admin/prop-firms - Status: 200 - Duration: 4.81ms
2025-12-31 14:20:13,966 - uvicorn.access - INFO - 127.0.0.1:50868 - "GET /api/v1/admin/prop-firms HTTP/1.1" 200
2025-12-31 14:20:33,401 - app - INFO - Request: GET /api/v1/users/me - Status: 404 - Duration: 34.97ms
2025-12-31 14:20:33,404 - uvicorn.access - INFO - 127.0.0.1:51784 - "GET /api/v1/users/me HTTP/1.1" 404
2025-12-31 14:20:33,554 - app - INFO - Request: GET /api/v1/prop-firm - Status: 404 - Duration: 9.70ms
2025-12-31 14:20:33,554 - uvicorn.access - INFO - 127.0.0.1:51794 - "GET /api/v1/prop-firm HTTP/1.1" 404
2025-12-31 14:20:42,257 - uvicorn.error - INFO - Shutting down
2025-12-31 14:20:42,358 - uvicorn.error - INFO - Waiting for application shutdown.
2025-12-31 14:20:42,358 - app - INFO - Shutting down application...
2025-12-31 14:20:42,358 - uvicorn.error - INFO - Application shutdown complete.
2025-12-31 14:20:42,359 - uvicorn.error - INFO - Finished server process [253812]
2025-12-31 14:20:43,780 - uvicorn.error - INFO - Started server process [263868]
2025-12-31 14:20:43,781 - uvicorn.error - INFO - Waiting for application startup.
2025-12-31 14:20:43,781 - app - INFO - Starting up application...
2025-12-31 14:20:43,790 - uvicorn.error - INFO - Application startup complete.
2025-12-31 14:20:48,476 - app - INFO - Request: GET /api/v1/users/me - Status: 404 - Duration: 79.70ms
2025-12-31 14:20:48,477 - uvicorn.access - INFO - 127.0.0.1:35816 - "GET /api/v1/users/me HTTP/1.1" 404
2025-12-31 14:20:48,887 - app - INFO - Request: GET /api/v1/prop-firm - Status: 404 - Duration: 21.67ms
2025-12-31 14:20:48,887 - uvicorn.access - INFO - 127.0.0.1:35826 - "GET /api/v1/prop-firm HTTP/1.1" 404
2025-12-31 14:21:17,265 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 332.13ms
2025-12-31 14:21:17,265 - uvicorn.access - INFO - 127.0.0.1:36734 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2025-12-31 14:21:18,537 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 38.94ms
2025-12-31 14:21:18,537 - uvicorn.access - INFO - 127.0.0.1:58882 - "GET /api/v1/users/me HTTP/1.1" 200
2025-12-31 14:21:18,626 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 38.12ms
2025-12-31 14:21:18,627 - uvicorn.access - INFO - 127.0.0.1:58896 - "GET /api/v1/users/me HTTP/1.1" 200
2025-12-31 14:21:18,637 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 39.43ms
2025-12-31 14:21:18,638 - uvicorn.access - INFO - 127.0.0.1:58900 - "GET /api/v1/prop-firm HTTP/1.1" 200
2025-12-31 14:21:18,842 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 45.89ms
2025-12-31 14:21:18,844 - uvicorn.access - INFO - 127.0.0.1:58902 - "GET /api/v1/prop-firm HTTP/1.1" 200
2025-12-31 14:22:03,712 - uvicorn.error - INFO - Shutting down
2025-12-31 14:22:03,813 - uvicorn.error - INFO - Waiting for application shutdown.
2025-12-31 14:22:03,814 - app - INFO - Shutting down application...
2025-12-31 14:22:03,814 - uvicorn.error - INFO - Application shutdown complete.
2025-12-31 14:22:03,814 - uvicorn.error - INFO - Finished server process [263868]
2025-12-31 14:22:05,370 - uvicorn.error - INFO - Started server process [265189]
2025-12-31 14:22:05,371 - uvicorn.error - INFO - Waiting for application startup.
2025-12-31 14:22:05,371 - app - INFO - Starting up application...
2025-12-31 14:22:05,377 - uvicorn.error - INFO - Application startup complete.
2025-12-31 14:22:36,330 - uvicorn.error - INFO - Shutting down
2025-12-31 14:22:36,432 - uvicorn.error - INFO - Waiting for application shutdown.
2025-12-31 14:22:36,432 - app - INFO - Shutting down application...
2025-12-31 14:22:36,433 - uvicorn.error - INFO - Application shutdown complete.
2025-12-31 14:22:36,435 - uvicorn.error - INFO - Finished server process [265189]
2025-12-31 14:22:37,930 - uvicorn.error - INFO - Started server process [265760]
2025-12-31 14:22:37,931 - uvicorn.error - INFO - Waiting for application startup.
2025-12-31 14:22:37,932 - app - INFO - Starting up application...
2025-12-31 14:22:37,940 - uvicorn.error - INFO - Application startup complete.
2025-12-31 14:24:31,119 - uvicorn.error - INFO - Shutting down
2025-12-31 14:24:31,220 - uvicorn.error - INFO - Waiting for application shutdown.
2025-12-31 14:24:31,220 - app - INFO - Shutting down application...
2025-12-31 14:24:31,221 - uvicorn.error - INFO - Application shutdown complete.
2025-12-31 14:24:31,221 - uvicorn.error - INFO - Finished server process [265760]
2025-12-31 14:24:33,059 - uvicorn.error - INFO - Started server process [267421]
2025-12-31 14:24:33,062 - uvicorn.error - INFO - Waiting for application startup.
2025-12-31 14:24:33,064 - app - INFO - Starting up application...
2025-12-31 14:24:33,110 - uvicorn.error - INFO - Application startup complete.
2025-12-31 14:28:27,136 - uvicorn.error - INFO - Shutting down
2025-12-31 14:28:27,237 - uvicorn.error - INFO - Waiting for application shutdown.
2025-12-31 14:28:27,240 - app - INFO - Shutting down application...
2025-12-31 14:28:27,241 - uvicorn.error - INFO - Application shutdown complete.
2025-12-31 14:28:27,244 - uvicorn.error - INFO - Finished server process [267421]
2025-12-31 14:28:29,203 - uvicorn.error - INFO - Started server process [270856]
2025-12-31 14:28:29,203 - uvicorn.error - INFO - Waiting for application startup.
2025-12-31 14:28:29,203 - app - INFO - Starting up application...
2025-12-31 14:28:29,233 - uvicorn.error - INFO - Application startup complete.
2025-12-31 14:28:58,711 - uvicorn.error - INFO - Shutting down
2025-12-31 14:28:58,811 - uvicorn.error - INFO - Waiting for application shutdown.
2025-12-31 14:28:58,811 - app - INFO - Shutting down application...
2025-12-31 14:28:58,811 - uvicorn.error - INFO - Application shutdown complete.
2025-12-31 14:28:58,811 - uvicorn.error - INFO - Finished server process [270856]
2025-12-31 14:29:02,085 - uvicorn.error - INFO - Started server process [271420]
2025-12-31 14:29:02,086 - uvicorn.error - INFO - Waiting for application startup.
2025-12-31 14:29:02,086 - app - INFO - Starting up application...
2025-12-31 14:29:02,093 - uvicorn.error - INFO - Application startup complete.
2025-12-31 14:32:23,115 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 73.46ms
2025-12-31 14:32:23,115 - uvicorn.access - INFO - 127.0.0.1:56624 - "POST /api/v1/prop-firm HTTP/1.1" 200
2025-12-31 14:32:23,145 - app - INFO - Request: POST /api/v1/payments - Status: 307 - Duration: 0.70ms
2025-12-31 14:32:23,145 - uvicorn.access - INFO - 127.0.0.1:56638 - "POST /api/v1/payments HTTP/1.1" 307
2025-12-31 14:32:23,149 - app - INFO - Request: OPTIONS /api/v1/payments/ - Status: 200 - Duration: 0.55ms
2025-12-31 14:32:23,150 - uvicorn.access - INFO - 127.0.0.1:56654 - "OPTIONS /api/v1/payments/ HTTP/1.1" 200
2025-12-31 14:32:23,168 - app - INFO - Request: POST /api/v1/payments/ - Status: 401 - Duration: 9.19ms
2025-12-31 14:32:23,168 - uvicorn.access - INFO - 127.0.0.1:56656 - "POST /api/v1/payments/ HTTP/1.1" 401
2025-12-31 14:32:31,983 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 337.40ms
2025-12-31 14:32:31,983 - uvicorn.access - INFO - 127.0.0.1:49652 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2025-12-31 14:32:33,273 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 33.79ms
2025-12-31 14:32:33,273 - uvicorn.access - INFO - 127.0.0.1:49662 - "GET /api/v1/users/me HTTP/1.1" 200
2025-12-31 14:32:33,314 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 13.75ms
2025-12-31 14:32:33,315 - uvicorn.access - INFO - 127.0.0.1:49670 - "GET /api/v1/users/me HTTP/1.1" 200
2025-12-31 14:32:33,367 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 16.99ms
2025-12-31 14:32:33,367 - uvicorn.access - INFO - 127.0.0.1:49674 - "GET /api/v1/prop-firm HTTP/1.1" 200
2025-12-31 14:32:33,401 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 21.91ms
2025-12-31 14:32:33,404 - uvicorn.access - INFO - 127.0.0.1:49686 - "GET /api/v1/prop-firm HTTP/1.1" 200
2025-12-31 15:13:18,689 - uvicorn.error - INFO - Shutting down
2025-12-31 15:13:18,796 - uvicorn.error - INFO - Waiting for application shutdown.
2025-12-31 15:13:18,797 - app - INFO - Shutting down application...
2025-12-31 15:13:18,797 - uvicorn.error - INFO - Application shutdown complete.
2025-12-31 15:13:18,797 - uvicorn.error - INFO - Finished server process [271420]
2026-01-02 09:31:53,832 - uvicorn.error - INFO - Started server process [216483]
2026-01-02 09:31:53,833 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 09:31:53,833 - app - INFO - Starting up application...
2026-01-02 09:31:53,899 - uvicorn.error - INFO - Application startup complete.
2026-01-02 09:32:09,838 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 753.17ms
2026-01-02 09:32:09,839 - uvicorn.access - INFO - 127.0.0.1:50188 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-02 09:32:11,156 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 71.41ms
2026-01-02 09:32:11,156 - uvicorn.access - INFO - 127.0.0.1:36606 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 09:32:11,246 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 60.12ms
2026-01-02 09:32:11,246 - uvicorn.access - INFO - 127.0.0.1:36622 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 09:32:11,309 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 88.73ms
2026-01-02 09:32:11,310 - uvicorn.access - INFO - 127.0.0.1:36626 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:32:11,394 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 29.74ms
2026-01-02 09:32:11,394 - uvicorn.access - INFO - 127.0.0.1:36636 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:34:53,365 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 24.91ms
2026-01-02 09:34:53,365 - uvicorn.access - INFO - 127.0.0.1:38538 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:35:44,081 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 22.97ms
2026-01-02 09:35:44,082 - uvicorn.access - INFO - 127.0.0.1:43132 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:36:48,688 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 30.25ms
2026-01-02 09:36:48,690 - uvicorn.access - INFO - 127.0.0.1:41142 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:43:29,459 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 43.37ms
2026-01-02 09:43:29,460 - uvicorn.access - INFO - 127.0.0.1:51876 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:43:29,501 - app - INFO - Request: POST /api/v1/payments - Status: 307 - Duration: 0.83ms
2026-01-02 09:43:29,501 - uvicorn.access - INFO - 127.0.0.1:51878 - "POST /api/v1/payments HTTP/1.1" 307
2026-01-02 09:43:29,517 - app - INFO - Request: OPTIONS /api/v1/payments/ - Status: 200 - Duration: 0.68ms
2026-01-02 09:43:29,517 - uvicorn.access - INFO - 127.0.0.1:51884 - "OPTIONS /api/v1/payments/ HTTP/1.1" 200
2026-01-02 09:43:29,529 - app - INFO - Request: POST /api/v1/payments/ - Status: 401 - Duration: 5.39ms
2026-01-02 09:43:29,531 - uvicorn.access - INFO - 127.0.0.1:51890 - "POST /api/v1/payments/ HTTP/1.1" 401
2026-01-02 09:47:21,902 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 346.94ms
2026-01-02 09:47:21,903 - uvicorn.access - INFO - 127.0.0.1:56566 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-02 09:47:23,183 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 23.68ms
2026-01-02 09:47:23,185 - uvicorn.access - INFO - 127.0.0.1:56570 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 09:47:23,341 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 112.57ms
2026-01-02 09:47:23,341 - uvicorn.access - INFO - 127.0.0.1:56586 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 09:47:23,370 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 109.63ms
2026-01-02 09:47:23,370 - uvicorn.access - INFO - 127.0.0.1:56602 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:47:23,711 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 48.65ms
2026-01-02 09:47:23,712 - uvicorn.access - INFO - 127.0.0.1:56612 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:49:37,379 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 8.03ms
2026-01-02 09:49:37,380 - uvicorn.access - INFO - 127.0.0.1:48234 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 09:49:37,486 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 54.81ms
2026-01-02 09:49:37,487 - uvicorn.access - INFO - 127.0.0.1:48242 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:49:37,514 - app - INFO - Request: POST /api/v1/payments - Status: 307 - Duration: 0.43ms
2026-01-02 09:49:37,515 - uvicorn.access - INFO - 127.0.0.1:48258 - "POST /api/v1/payments HTTP/1.1" 307
2026-01-02 09:49:37,544 - app - INFO - Request: POST /api/v1/payments/ - Status: 401 - Duration: 3.25ms
2026-01-02 09:49:37,545 - uvicorn.access - INFO - 127.0.0.1:48262 - "POST /api/v1/payments/ HTTP/1.1" 401
2026-01-02 09:52:35,851 - uvicorn.error - INFO - Shutting down
2026-01-02 09:52:35,961 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-02 09:52:35,962 - app - INFO - Shutting down application...
2026-01-02 09:52:35,963 - uvicorn.error - INFO - Application shutdown complete.
2026-01-02 09:52:35,963 - uvicorn.error - INFO - Finished server process [216483]
2026-01-02 09:52:41,041 - uvicorn.error - INFO - Started server process [234477]
2026-01-02 09:52:41,047 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 09:52:41,048 - app - INFO - Starting up application...
2026-01-02 09:52:41,077 - uvicorn.error - INFO - Application startup complete.
2026-01-02 09:52:43,144 - uvicorn.error - INFO - Started server process [234568]
2026-01-02 09:52:43,144 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 09:52:43,145 - app - INFO - Starting up application...
2026-01-02 09:52:43,155 - uvicorn.error - INFO - Application startup complete.
2026-01-02 09:53:53,426 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 365.90ms
2026-01-02 09:53:53,427 - uvicorn.access - INFO - 127.0.0.1:35028 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-02 09:53:54,896 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 79.26ms
2026-01-02 09:53:54,896 - uvicorn.access - INFO - 127.0.0.1:35036 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 09:53:54,988 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 58.00ms
2026-01-02 09:53:54,988 - uvicorn.access - INFO - 127.0.0.1:35050 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 09:53:55,039 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 38.35ms
2026-01-02 09:53:55,039 - uvicorn.access - INFO - 127.0.0.1:35058 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:53:55,148 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 75.49ms
2026-01-02 09:53:55,149 - uvicorn.access - INFO - 127.0.0.1:35070 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:56:11,886 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 16.43ms
2026-01-02 09:56:11,886 - uvicorn.access - INFO - 127.0.0.1:40956 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 09:56:11,984 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 54.03ms
2026-01-02 09:56:11,984 - uvicorn.access - INFO - 127.0.0.1:40962 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:56:12,140 - app - INFO - Request: POST /api/v1/payments - Status: 200 - Duration: 95.57ms
2026-01-02 09:56:12,141 - uvicorn.access - INFO - 127.0.0.1:40968 - "POST /api/v1/payments HTTP/1.1" 200
2026-01-02 09:56:20,186 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 39.43ms
2026-01-02 09:56:20,186 - uvicorn.access - INFO - 127.0.0.1:40984 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 09:56:20,239 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 24.04ms
2026-01-02 09:56:20,241 - uvicorn.access - INFO - 127.0.0.1:40988 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 09:56:20,305 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 59.24ms
2026-01-02 09:56:20,306 - uvicorn.access - INFO - 127.0.0.1:41002 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 09:56:20,409 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 79.05ms
2026-01-02 09:56:20,410 - uvicorn.access - INFO - 127.0.0.1:41018 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 10:02:43,195 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 400 - Duration: 10.32ms
2026-01-02 10:02:43,196 - uvicorn.access - INFO - 127.0.0.1:49214 - "POST /api/v1/auth/login/access-token HTTP/1.1" 400
2026-01-02 10:16:41,292 - app - INFO - Request: POST /api/v1/users/ - Status: 307 - Duration: 0.65ms
2026-01-02 10:16:41,293 - uvicorn.access - INFO - 127.0.0.1:57358 - "POST /api/v1/users/ HTTP/1.1" 307
2026-01-02 10:17:31,185 - uvicorn.error - INFO - Shutting down
2026-01-02 10:17:31,286 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-02 10:17:31,287 - app - INFO - Shutting down application...
2026-01-02 10:17:31,288 - uvicorn.error - INFO - Application shutdown complete.
2026-01-02 10:17:31,288 - uvicorn.error - INFO - Finished server process [234568]
2026-01-02 10:17:33,908 - uvicorn.error - INFO - Started server process [257051]
2026-01-02 10:17:33,908 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:17:33,909 - app - INFO - Starting up application...
2026-01-02 10:17:33,944 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:17:35,057 - uvicorn.error - INFO - Shutting down
2026-01-02 10:17:35,157 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-02 10:17:35,158 - app - INFO - Shutting down application...
2026-01-02 10:17:35,158 - uvicorn.error - INFO - Application shutdown complete.
2026-01-02 10:17:35,158 - uvicorn.error - INFO - Finished server process [257051]
2026-01-02 10:17:37,580 - uvicorn.error - INFO - Started server process [257126]
2026-01-02 10:17:37,580 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:17:37,580 - app - INFO - Starting up application...
2026-01-02 10:17:37,590 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:17:39,438 - uvicorn.error - INFO - Started server process [257158]
2026-01-02 10:17:39,439 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:17:39,440 - app - INFO - Starting up application...
2026-01-02 10:17:39,448 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:17:43,066 - uvicorn.error - INFO - Shutting down
2026-01-02 10:17:43,166 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-02 10:17:43,167 - app - INFO - Shutting down application...
2026-01-02 10:17:43,167 - uvicorn.error - INFO - Application shutdown complete.
2026-01-02 10:17:43,167 - uvicorn.error - INFO - Finished server process [257158]
2026-01-02 10:17:46,098 - uvicorn.error - INFO - Started server process [257276]
2026-01-02 10:17:46,098 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:17:46,099 - app - INFO - Starting up application...
2026-01-02 10:17:46,107 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:17:47,596 - uvicorn.error - INFO - Started server process [257309]
2026-01-02 10:17:47,596 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:17:47,596 - app - INFO - Starting up application...
2026-01-02 10:17:47,637 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:17:48,042 - uvicorn.error - INFO - Shutting down
2026-01-02 10:17:48,144 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-02 10:17:48,161 - app - INFO - Shutting down application...
2026-01-02 10:17:48,162 - uvicorn.error - INFO - Application shutdown complete.
2026-01-02 10:17:48,162 - uvicorn.error - INFO - Finished server process [257309]
2026-01-02 10:17:49,631 - uvicorn.error - INFO - Started server process [257368]
2026-01-02 10:17:49,631 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:17:49,632 - app - INFO - Starting up application...
2026-01-02 10:17:49,639 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:17:51,552 - uvicorn.error - INFO - Shutting down
2026-01-02 10:17:51,655 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-02 10:17:51,655 - app - INFO - Shutting down application...
2026-01-02 10:17:51,655 - uvicorn.error - INFO - Application shutdown complete.
2026-01-02 10:17:51,656 - uvicorn.error - INFO - Finished server process [257368]
2026-01-02 10:17:53,289 - uvicorn.error - INFO - Started server process [257446]
2026-01-02 10:17:53,289 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:17:53,289 - app - INFO - Starting up application...
2026-01-02 10:17:53,298 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:17:54,553 - uvicorn.error - INFO - Started server process [257484]
2026-01-02 10:17:54,554 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:17:54,554 - app - INFO - Starting up application...
2026-01-02 10:17:54,562 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:17:55,970 - uvicorn.error - INFO - Shutting down
2026-01-02 10:17:56,071 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-02 10:17:56,071 - app - INFO - Shutting down application...
2026-01-02 10:17:56,071 - uvicorn.error - INFO - Application shutdown complete.
2026-01-02 10:17:56,071 - uvicorn.error - INFO - Finished server process [257484]
2026-01-02 10:17:57,580 - uvicorn.error - INFO - Started server process [257560]
2026-01-02 10:17:57,581 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:17:57,581 - app - INFO - Starting up application...
2026-01-02 10:17:57,591 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:17:58,798 - uvicorn.error - INFO - Started server process [257591]
2026-01-02 10:17:58,799 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:17:58,799 - app - INFO - Starting up application...
2026-01-02 10:17:58,805 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:47:26,513 - app - INFO - Request: POST /api/v1/users - Status: 200 - Duration: 837.37ms
2026-01-02 10:47:26,514 - uvicorn.access - INFO - 127.0.0.1:35080 - "POST /api/v1/users HTTP/1.1" 200
2026-01-02 10:47:27,301 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 777.90ms
2026-01-02 10:47:27,303 - uvicorn.access - INFO - 127.0.0.1:35080 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-02 10:47:27,379 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 68.56ms
2026-01-02 10:47:27,380 - uvicorn.access - INFO - 127.0.0.1:35080 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 10:47:27,472 - app - INFO - Request: PUT /api/v1/users/me - Status: 200 - Duration: 79.62ms
2026-01-02 10:47:27,473 - uvicorn.access - INFO - 127.0.0.1:35080 - "PUT /api/v1/users/me HTTP/1.1" 200
2026-01-02 10:48:27,907 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 316.23ms
2026-01-02 10:48:27,907 - uvicorn.access - INFO - 127.0.0.1:51194 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-02 10:48:27,931 - app - INFO - Request: POST /api/v1/payments - Status: 200 - Duration: 20.66ms
2026-01-02 10:48:27,931 - uvicorn.access - INFO - 127.0.0.1:51194 - "POST /api/v1/payments HTTP/1.1" 200
2026-01-02 10:48:27,954 - app - INFO - Request: POST /api/v1/transactions - Status: 200 - Duration: 20.17ms
2026-01-02 10:48:27,954 - uvicorn.access - INFO - 127.0.0.1:51194 - "POST /api/v1/transactions HTTP/1.1" 200
2026-01-02 10:48:27,979 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 20.43ms
2026-01-02 10:48:27,979 - uvicorn.access - INFO - 127.0.0.1:51194 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 10:48:28,332 - app - INFO - Request: POST /api/v1/auth/login/admin/access-token - Status: 200 - Duration: 350.21ms
2026-01-02 10:48:28,332 - uvicorn.access - INFO - 127.0.0.1:51194 - "POST /api/v1/auth/login/admin/access-token HTTP/1.1" 200
2026-01-02 10:48:28,391 - app - INFO - Request: POST /api/v1/discounts/discounts - Status: 200 - Duration: 55.73ms
2026-01-02 10:48:28,391 - uvicorn.access - INFO - 127.0.0.1:51194 - "POST /api/v1/discounts/discounts HTTP/1.1" 200
2026-01-02 10:48:28,455 - app - INFO - Request: POST /api/v1/discounts/apply-discount - Status: 200 - Duration: 59.51ms
2026-01-02 10:48:28,455 - uvicorn.access - INFO - 127.0.0.1:51194 - "POST /api/v1/discounts/apply-discount HTTP/1.1" 200
2026-01-02 10:48:28,472 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 13.23ms
2026-01-02 10:48:28,473 - uvicorn.access - INFO - 127.0.0.1:51194 - "GET /api/v1/prop-firm?status=pending HTTP/1.1" 200
2026-01-02 10:48:28,513 - app - INFO - Request: GET /api/v1/admin/stats - Status: 200 - Duration: 37.19ms
2026-01-02 10:48:28,515 - uvicorn.access - INFO - 127.0.0.1:51194 - "GET /api/v1/admin/stats HTTP/1.1" 200
2026-01-02 10:48:28,563 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 39.12ms
2026-01-02 10:48:28,564 - uvicorn.access - INFO - 127.0.0.1:51194 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 10:48:28,667 - app - ERROR - Request failed: PUT /api/v1/admin/prop-firm/1b1d75e9-084c-4d81-b66e-962ee7d63810 - Duration: 93.26ms - Error: cannot access local variable 'user' where it is not associated with a value
2026-01-02 10:48:28,701 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/admin.py", line 113, in update_propfirm_registration
    |     registration = await service.update_registration(registration_id, registration_in, background_tasks)
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/service/propfirm_registration_service.py", line 79, in update_registration
    |     if user:
    |        ^^^^
    | UnboundLocalError: cannot access local variable 'user' where it is not associated with a value
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/admin.py", line 113, in update_propfirm_registration
    registration = await service.update_registration(registration_id, registration_in, background_tasks)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/propfirm_registration_service.py", line 79, in update_registration
    if user:
       ^^^^
UnboundLocalError: cannot access local variable 'user' where it is not associated with a value

2026-01-02 10:48:28,707 - uvicorn.access - INFO - 127.0.0.1:51194 - "PUT /api/v1/admin/prop-firm/1b1d75e9-084c-4d81-b66e-962ee7d63810 HTTP/1.1" 500
2026-01-02 10:49:10,081 - uvicorn.error - INFO - Shutting down
2026-01-02 10:49:10,185 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-02 10:49:10,186 - app - INFO - Shutting down application...
2026-01-02 10:49:10,192 - uvicorn.error - INFO - Application shutdown complete.
2026-01-02 10:49:10,200 - uvicorn.error - INFO - Finished server process [257591]
2026-01-02 10:49:12,606 - uvicorn.error - INFO - Started server process [286658]
2026-01-02 10:49:12,606 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:49:12,607 - app - INFO - Starting up application...
2026-01-02 10:49:12,654 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:49:42,579 - uvicorn.error - INFO - Shutting down
2026-01-02 10:49:42,680 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-02 10:49:42,681 - app - INFO - Shutting down application...
2026-01-02 10:49:42,684 - uvicorn.error - INFO - Application shutdown complete.
2026-01-02 10:49:42,685 - uvicorn.error - INFO - Finished server process [286658]
2026-01-02 10:49:46,363 - uvicorn.error - INFO - Started server process [287169]
2026-01-02 10:49:46,364 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 10:49:46,364 - app - INFO - Starting up application...
2026-01-02 10:49:46,386 - uvicorn.error - INFO - Application startup complete.
2026-01-02 10:50:05,477 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 579.60ms
2026-01-02 10:50:05,479 - uvicorn.access - INFO - 127.0.0.1:47530 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-02 10:50:05,541 - app - INFO - Request: POST /api/v1/payments - Status: 200 - Duration: 54.14ms
2026-01-02 10:50:05,542 - uvicorn.access - INFO - 127.0.0.1:47530 - "POST /api/v1/payments HTTP/1.1" 200
2026-01-02 10:50:05,582 - app - INFO - Request: POST /api/v1/transactions - Status: 200 - Duration: 33.78ms
2026-01-02 10:50:05,583 - uvicorn.access - INFO - 127.0.0.1:47530 - "POST /api/v1/transactions HTTP/1.1" 200
2026-01-02 10:50:05,615 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 28.36ms
2026-01-02 10:50:05,615 - uvicorn.access - INFO - 127.0.0.1:47530 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 10:50:06,044 - app - INFO - Request: POST /api/v1/auth/login/admin/access-token - Status: 200 - Duration: 424.27ms
2026-01-02 10:50:06,045 - uvicorn.access - INFO - 127.0.0.1:47530 - "POST /api/v1/auth/login/admin/access-token HTTP/1.1" 200
2026-01-02 10:50:06,064 - app - INFO - Request: POST /api/v1/discounts/discounts - Status: 400 - Duration: 15.65ms
2026-01-02 10:50:06,065 - uvicorn.access - INFO - 127.0.0.1:47530 - "POST /api/v1/discounts/discounts HTTP/1.1" 400
2026-01-02 10:50:06,112 - app - INFO - Request: POST /api/v1/discounts/apply-discount - Status: 400 - Duration: 42.64ms
2026-01-02 10:50:06,113 - uvicorn.access - INFO - 127.0.0.1:47530 - "POST /api/v1/discounts/apply-discount HTTP/1.1" 400
2026-01-02 10:50:06,151 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 31.70ms
2026-01-02 10:50:06,152 - uvicorn.access - INFO - 127.0.0.1:47530 - "GET /api/v1/prop-firm?status=pending HTTP/1.1" 200
2026-01-02 10:50:06,221 - app - INFO - Request: GET /api/v1/admin/stats - Status: 200 - Duration: 59.32ms
2026-01-02 10:50:06,221 - uvicorn.access - INFO - 127.0.0.1:47530 - "GET /api/v1/admin/stats HTTP/1.1" 200
2026-01-02 10:50:06,251 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 23.75ms
2026-01-02 10:50:06,252 - uvicorn.access - INFO - 127.0.0.1:47530 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 10:50:06,299 - app - INFO - Request: PUT /api/v1/admin/prop-firm/1b1d75e9-084c-4d81-b66e-962ee7d63810 - Status: 200 - Duration: 38.13ms
2026-01-02 10:50:06,300 - uvicorn.access - INFO - 127.0.0.1:47530 - "PUT /api/v1/admin/prop-firm/1b1d75e9-084c-4d81-b66e-962ee7d63810 HTTP/1.1" 200
2026-01-02 10:50:06,376 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 68.30ms
2026-01-02 10:50:06,380 - uvicorn.access - INFO - 127.0.0.1:47530 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-02 11:19:04,248 - app - INFO - Request: GET /api/v1/users/me - Status: 403 - Duration: 38.47ms
2026-01-02 11:19:04,250 - uvicorn.access - INFO - 127.0.0.1:53486 - "GET /api/v1/users/me HTTP/1.1" 403
2026-01-02 11:19:04,635 - app - INFO - Request: GET /api/v1/prop-firm - Status: 403 - Duration: 16.52ms
2026-01-02 11:19:04,635 - uvicorn.access - INFO - 127.0.0.1:53496 - "GET /api/v1/prop-firm HTTP/1.1" 403
2026-01-02 11:19:43,724 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 642.13ms
2026-01-02 11:19:43,733 - uvicorn.access - INFO - 127.0.0.1:45528 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-02 11:19:45,522 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 94.53ms
2026-01-02 11:19:45,524 - uvicorn.access - INFO - 127.0.0.1:45536 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 11:19:45,571 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 17.80ms
2026-01-02 11:19:45,571 - uvicorn.access - INFO - 127.0.0.1:45550 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 11:19:45,659 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 71.14ms
2026-01-02 11:19:45,660 - uvicorn.access - INFO - 127.0.0.1:45564 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 11:19:45,754 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 15.18ms
2026-01-02 11:19:45,754 - uvicorn.access - INFO - 127.0.0.1:45572 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 11:23:03,652 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 243.46ms
2026-01-02 11:23:03,660 - uvicorn.access - INFO - 127.0.0.1:57914 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 11:23:04,765 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 228.52ms
2026-01-02 11:23:04,766 - uvicorn.access - INFO - 127.0.0.1:57928 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 11:23:05,783 - app - INFO - Request: POST /api/v1/payments - Status: 200 - Duration: 180.52ms
2026-01-02 11:23:05,784 - uvicorn.access - INFO - 127.0.0.1:57942 - "POST /api/v1/payments HTTP/1.1" 200
2026-01-02 11:23:15,078 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 255.29ms
2026-01-02 11:23:15,081 - uvicorn.access - INFO - 127.0.0.1:38970 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 11:23:16,315 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 430.42ms
2026-01-02 11:23:16,317 - uvicorn.access - INFO - 127.0.0.1:38980 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 11:23:16,538 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 161.02ms
2026-01-02 11:23:16,538 - uvicorn.access - INFO - 127.0.0.1:38996 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 11:23:17,686 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 150.68ms
2026-01-02 11:23:17,686 - uvicorn.access - INFO - 127.0.0.1:39006 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-02 11:26:23,827 - uvicorn.error - INFO - Shutting down
2026-01-02 11:26:24,097 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-02 11:26:24,097 - app - INFO - Shutting down application...
2026-01-02 11:26:24,097 - uvicorn.error - INFO - Application shutdown complete.
2026-01-02 11:26:24,097 - uvicorn.error - INFO - Finished server process [287169]
2026-01-02 12:22:01,634 - uvicorn.error - INFO - Started server process [49099]
2026-01-02 12:22:01,638 - uvicorn.error - INFO - Waiting for application startup.
2026-01-02 12:22:01,640 - app - INFO - Starting up application...
2026-01-02 12:22:01,750 - uvicorn.error - INFO - Application startup complete.
2026-01-02 12:22:01,751 - uvicorn.error - INFO - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2026-01-02 12:22:44,002 - app - INFO - Request: POST /api/v1/users - Status: 400 - Duration: 139.56ms
2026-01-02 12:22:44,003 - uvicorn.access - INFO - 127.0.0.1:36198 - "POST /api/v1/users HTTP/1.1" 400
2026-01-02 12:22:44,599 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 579.81ms
2026-01-02 12:22:44,600 - uvicorn.access - INFO - 127.0.0.1:36198 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-02 12:22:44,692 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 87.38ms
2026-01-02 12:22:44,692 - uvicorn.access - INFO - 127.0.0.1:36198 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-02 12:22:44,859 - app - INFO - Request: PUT /api/v1/users/me - Status: 200 - Duration: 148.69ms
2026-01-02 12:22:44,868 - uvicorn.access - INFO - 127.0.0.1:36198 - "PUT /api/v1/users/me HTTP/1.1" 200
2026-01-02 12:30:09,736 - uvicorn.error - INFO - Shutting down
2026-01-14 21:34:47,599 - uvicorn.error - INFO - Started server process [58465]
2026-01-14 21:34:47,628 - uvicorn.error - INFO - Waiting for application startup.
2026-01-14 21:34:47,630 - app - INFO - Starting up application...
2026-01-14 21:34:47,776 - uvicorn.error - INFO - Application startup complete.
2026-01-14 21:35:17,521 - app - INFO - Request: GET /docs - Status: 200 - Duration: 2.52ms
2026-01-14 21:35:17,521 - uvicorn.access - INFO - 127.0.0.1:41938 - "GET /docs HTTP/1.1" 200
2026-01-14 21:35:18,252 - app - INFO - Request: GET /openapi.json - Status: 200 - Duration: 289.77ms
2026-01-14 21:35:18,253 - uvicorn.access - INFO - 127.0.0.1:41938 - "GET /openapi.json HTTP/1.1" 200
2026-01-14 21:38:59,138 - app - INFO - Request: GET /api/v1/crypto-payments/status - Status: 200 - Duration: 2045.85ms
2026-01-14 21:38:59,138 - uvicorn.access - INFO - 127.0.0.1:47218 - "GET /api/v1/crypto-payments/status HTTP/1.1" 200
2026-01-14 21:41:23,051 - app - ERROR - Request failed: GET /api/v1/crypto-payments/currencies - Duration: 3086.77ms - Error: Client error '403 Forbidden' for url 'https://api.nowpayments.io/v1/currencies'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2026-01-14 21:41:23,086 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 36, in get_available_currencies
    |     currencies = await service.get_available_currencies()
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 52, in get_available_currencies
    |     response.raise_for_status()
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    |     raise HTTPStatusError(message, request=request, response=self)
    | httpx.HTTPStatusError: Client error '403 Forbidden' for url 'https://api.nowpayments.io/v1/currencies'
    | For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 36, in get_available_currencies
    currencies = await service.get_available_currencies()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 52, in get_available_currencies
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '403 Forbidden' for url 'https://api.nowpayments.io/v1/currencies'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

2026-01-14 21:41:23,099 - uvicorn.access - INFO - 127.0.0.1:45998 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 500
2026-01-14 21:41:38,200 - app - ERROR - Request failed: GET /api/v1/crypto-payments/min-amount - Duration: 7455.96ms - Error: 
2026-01-14 21:41:38,213 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 156, in _connect
    stream = await stream.start_tls(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 67, in start_tls
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 50, in get_minimum_amount
    return await service.get_minimum_amount(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 73, in get_minimum_amount
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-14 21:41:38,214 - uvicorn.access - INFO - 127.0.0.1:43194 - "GET /api/v1/crypto-payments/min-amount?currency_from=btc&currency_to=usd HTTP/1.1" 500
2026-01-14 22:11:17,921 - app - INFO - Request: GET /docs - Status: 200 - Duration: 1.09ms
2026-01-14 22:11:17,922 - uvicorn.access - INFO - 127.0.0.1:49532 - "GET /docs HTTP/1.1" 200
2026-01-14 22:32:00,792 - uvicorn.error - INFO - Shutting down
2026-01-14 22:32:00,894 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-14 22:32:00,895 - app - INFO - Shutting down application...
2026-01-14 22:32:00,895 - uvicorn.error - INFO - Application shutdown complete.
2026-01-14 22:32:00,896 - uvicorn.error - INFO - Finished server process [58465]
2026-01-14 22:32:03,177 - app - CRITICAL - Failed to start application: name 'BackgroundTasks' is not defined
2026-01-14 22:32:03,180 - app - CRITICAL - Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 18, in <module>
    from app.api.v1.endpoints import auth, users, admin, payments, transactions, prop_firm, discounts, notification, support, crypto_payments
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 142, in <module>
    background_tasks: BackgroundTasks,
                      ^^^^^^^^^^^^^^^
NameError: name 'BackgroundTasks' is not defined

2026-01-14 22:32:10,103 - uvicorn.error - INFO - Started server process [99142]
2026-01-14 22:32:10,104 - uvicorn.error - INFO - Waiting for application startup.
2026-01-14 22:32:10,105 - app - INFO - Starting up application...
2026-01-14 22:32:10,116 - uvicorn.error - INFO - Application startup complete.
2026-01-14 22:37:27,919 - uvicorn.error - INFO - Shutting down
2026-01-14 22:37:28,027 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-14 22:37:28,027 - app - INFO - Shutting down application...
2026-01-14 22:37:28,027 - uvicorn.error - INFO - Application shutdown complete.
2026-01-14 22:37:28,027 - uvicorn.error - INFO - Finished server process [99142]
2026-01-14 22:37:30,417 - uvicorn.error - INFO - Started server process [103221]
2026-01-14 22:37:30,418 - uvicorn.error - INFO - Waiting for application startup.
2026-01-14 22:37:30,418 - app - INFO - Starting up application...
2026-01-14 22:37:30,431 - uvicorn.error - INFO - Application startup complete.
2026-01-14 22:37:35,365 - uvicorn.error - INFO - Shutting down
2026-01-14 22:37:35,466 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-14 22:37:35,466 - app - INFO - Shutting down application...
2026-01-14 22:37:35,467 - uvicorn.error - INFO - Application shutdown complete.
2026-01-14 22:37:35,467 - uvicorn.error - INFO - Finished server process [103221]
2026-01-14 22:37:37,349 - uvicorn.error - INFO - Started server process [103382]
2026-01-14 22:37:37,350 - uvicorn.error - INFO - Waiting for application startup.
2026-01-14 22:37:37,350 - app - INFO - Starting up application...
2026-01-14 22:37:37,363 - uvicorn.error - INFO - Application startup complete.
2026-01-14 23:04:09,956 - app - INFO - Request: GET /openapi.json - Status: 200 - Duration: 255.56ms
2026-01-14 23:04:09,957 - uvicorn.access - INFO - 127.0.0.1:42024 - "GET /openapi.json HTTP/1.1" 200
2026-01-14 23:04:10,017 - app - INFO - Request: GET /favicon.ico - Status: 404 - Duration: 0.83ms
2026-01-14 23:04:10,018 - uvicorn.access - INFO - 127.0.0.1:42024 - "GET /favicon.ico HTTP/1.1" 404
2026-01-14 23:17:28,229 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 438.00ms
2026-01-14 23:17:28,229 - uvicorn.access - INFO - 127.0.0.1:49600 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-14 23:17:29,528 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 65.66ms
2026-01-14 23:17:29,528 - uvicorn.access - INFO - 127.0.0.1:49610 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-14 23:17:29,551 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 13.52ms
2026-01-14 23:17:29,552 - uvicorn.access - INFO - 127.0.0.1:49626 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-14 23:17:29,566 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 22.84ms
2026-01-14 23:17:29,567 - uvicorn.access - INFO - 127.0.0.1:49628 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-14 23:17:29,587 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 11.26ms
2026-01-14 23:17:29,587 - uvicorn.access - INFO - 127.0.0.1:49636 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-14 23:19:30,441 - app - ERROR - Request failed: GET /api/v1/crypto-payments/currencies - Duration: 5200.93ms - Error: 
2026-01-14 23:19:30,461 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 36, in get_available_currencies
    currencies = await service.get_available_currencies()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 48, in get_available_currencies
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-14 23:19:30,462 - uvicorn.access - INFO - 127.0.0.1:48986 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 500
2026-01-14 23:19:30,572 - app - ERROR - Request failed: GET /api/v1/crypto-payments/estimate - Duration: 5130.75ms - Error: 
2026-01-14 23:19:30,582 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 67, in get_estimated_price
    return await service.get_estimated_price(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 95, in get_estimated_price
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-14 23:19:30,583 - uvicorn.access - INFO - 127.0.0.1:49000 - "GET /api/v1/crypto-payments/estimate?amount=990&currency_from=usd&currency_to=btc HTTP/1.1" 500
2026-01-14 23:19:35,572 - app - ERROR - Request failed: GET /api/v1/crypto-payments/currencies - Duration: 5089.83ms - Error: 
2026-01-14 23:19:35,576 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 36, in get_available_currencies
    currencies = await service.get_available_currencies()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 48, in get_available_currencies
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-14 23:19:35,577 - uvicorn.access - INFO - 127.0.0.1:49014 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 500
2026-01-14 23:19:35,695 - app - ERROR - Request failed: GET /api/v1/crypto-payments/estimate - Duration: 5070.14ms - Error: 
2026-01-14 23:19:35,704 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 67, in get_estimated_price
    return await service.get_estimated_price(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 95, in get_estimated_price
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-14 23:19:35,705 - uvicorn.access - INFO - 127.0.0.1:49026 - "GET /api/v1/crypto-payments/estimate?amount=990&currency_from=usd&currency_to=btc HTTP/1.1" 500
2026-01-14 23:19:42,771 - app - ERROR - Request failed: GET /api/v1/crypto-payments/estimate - Duration: 2144.35ms - Error: Client error '429 Too Many Requests' for url 'https://api.nowpayments.io/v1/estimate?amount=990.0&currency_from=usd&currency_to=eth'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-14 23:19:42,781 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 67, in get_estimated_price
    |     return await service.get_estimated_price(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 100, in get_estimated_price
    |     response.raise_for_status()
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    |     raise HTTPStatusError(message, request=request, response=self)
    | httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.nowpayments.io/v1/estimate?amount=990.0&currency_from=usd&currency_to=eth'
    | For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 67, in get_estimated_price
    return await service.get_estimated_price(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 100, in get_estimated_price
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.nowpayments.io/v1/estimate?amount=990.0&currency_from=usd&currency_to=eth'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429

2026-01-14 23:19:42,781 - uvicorn.access - INFO - 127.0.0.1:56814 - "GET /api/v1/crypto-payments/estimate?amount=990&currency_from=usd&currency_to=eth HTTP/1.1" 500
2026-01-14 23:19:42,784 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 1247.00ms
2026-01-14 23:19:42,784 - uvicorn.access - INFO - 127.0.0.1:56818 - "GET /api/v1/crypto-payments/estimate?amount=990&currency_from=usd&currency_to=btc HTTP/1.1" 200
2026-01-14 23:21:54,606 - app - INFO - Request: GET /api/v1/crypto-payments/currencies - Status: 200 - Duration: 890.19ms
2026-01-14 23:21:54,606 - uvicorn.access - INFO - 127.0.0.1:39060 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 200
2026-01-14 23:21:54,693 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 886.44ms
2026-01-14 23:21:54,693 - uvicorn.access - INFO - 127.0.0.1:39068 - "GET /api/v1/crypto-payments/estimate?amount=3590&currency_from=usd&currency_to=btc HTTP/1.1" 200
2026-01-14 23:21:55,251 - app - INFO - Request: GET /api/v1/crypto-payments/currencies - Status: 200 - Duration: 632.13ms
2026-01-14 23:21:55,251 - uvicorn.access - INFO - 127.0.0.1:39080 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 200
2026-01-14 23:21:55,278 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 566.20ms
2026-01-14 23:21:55,279 - uvicorn.access - INFO - 127.0.0.1:39084 - "GET /api/v1/crypto-payments/estimate?amount=3590&currency_from=usd&currency_to=btc HTTP/1.1" 200
2026-01-14 23:27:17,874 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 51.69ms
2026-01-14 23:27:17,874 - uvicorn.access - INFO - 127.0.0.1:59730 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-14 23:27:17,982 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 70.75ms
2026-01-14 23:27:17,983 - uvicorn.access - INFO - 127.0.0.1:59738 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-14 23:27:19,440 - app - ERROR - Request failed: GET /api/v1/crypto-payments/currencies - Duration: 5030.46ms - Error: 
2026-01-14 23:27:19,449 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 36, in get_available_currencies
    currencies = await service.get_available_currencies()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 48, in get_available_currencies
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-14 23:27:19,450 - uvicorn.access - INFO - 127.0.0.1:59708 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 500
2026-01-14 23:27:19,542 - app - ERROR - Request failed: GET /api/v1/crypto-payments/estimate - Duration: 5103.46ms - Error: 
2026-01-14 23:27:19,548 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 67, in get_estimated_price
    return await service.get_estimated_price(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 95, in get_estimated_price
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-14 23:27:19,549 - uvicorn.access - INFO - 127.0.0.1:59718 - "GET /api/v1/crypto-payments/estimate?amount=990&currency_from=usd&currency_to=btc HTTP/1.1" 500
2026-01-14 23:27:20,174 - app - INFO - Request: GET /api/v1/crypto-payments/currencies - Status: 200 - Duration: 716.20ms
2026-01-14 23:27:20,174 - uvicorn.access - INFO - 127.0.0.1:59752 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 200
2026-01-14 23:27:20,275 - app - INFO - Request: POST /api/v1/crypto-payments/invoice - Status: 200 - Duration: 2271.86ms
2026-01-14 23:27:20,276 - uvicorn.access - INFO - 127.0.0.1:59744 - "POST /api/v1/crypto-payments/invoice HTTP/1.1" 200
2026-01-14 23:27:20,522 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 966.74ms
2026-01-14 23:27:20,522 - uvicorn.access - INFO - 127.0.0.1:59764 - "GET /api/v1/crypto-payments/estimate?amount=990&currency_from=usd&currency_to=btc HTTP/1.1" 200
2026-01-14 23:29:12,181 - uvicorn.error - INFO - Shutting down
2026-01-14 23:29:12,281 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-14 23:29:12,282 - app - INFO - Shutting down application...
2026-01-14 23:29:12,282 - uvicorn.error - INFO - Application shutdown complete.
2026-01-14 23:29:12,282 - uvicorn.error - INFO - Finished server process [103382]
2026-01-15 06:11:51,167 - uvicorn.error - INFO - Started server process [25463]
2026-01-15 06:11:51,169 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:11:51,169 - app - INFO - Starting up application...
2026-01-15 06:11:51,188 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:12:06,136 - app - INFO - Request: GET /favicon.ico - Status: 404 - Duration: 4.27ms
2026-01-15 06:12:06,138 - uvicorn.access - INFO - 127.0.0.1:46330 - "GET /favicon.ico HTTP/1.1" 404
2026-01-15 06:12:10,926 - app - INFO - Request: GET /api/v1/users/me - Status: 403 - Duration: 12.54ms
2026-01-15 06:12:10,927 - uvicorn.access - INFO - 127.0.0.1:56710 - "GET /api/v1/users/me HTTP/1.1" 403
2026-01-15 06:12:11,043 - app - INFO - Request: GET /api/v1/prop-firm - Status: 403 - Duration: 7.71ms
2026-01-15 06:12:11,050 - uvicorn.access - INFO - 127.0.0.1:56726 - "GET /api/v1/prop-firm HTTP/1.1" 403
2026-01-15 06:12:14,079 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 355.14ms
2026-01-15 06:12:14,079 - uvicorn.access - INFO - 127.0.0.1:56740 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-15 06:12:15,634 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 227.91ms
2026-01-15 06:12:15,634 - uvicorn.access - INFO - 127.0.0.1:56752 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 06:12:15,720 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 66.91ms
2026-01-15 06:12:15,721 - uvicorn.access - INFO - 127.0.0.1:56764 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 06:12:15,774 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 107.69ms
2026-01-15 06:12:15,776 - uvicorn.access - INFO - 127.0.0.1:56770 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 06:12:15,848 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 55.27ms
2026-01-15 06:12:15,850 - uvicorn.access - INFO - 127.0.0.1:56782 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 06:14:00,910 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 1360.34ms
2026-01-15 06:14:00,910 - uvicorn.access - INFO - 127.0.0.1:50120 - "GET /api/v1/crypto-payments/estimate?amount=990&currency_from=usd&currency_to=btc HTTP/1.1" 200
2026-01-15 06:14:00,911 - app - INFO - Request: GET /api/v1/crypto-payments/currencies - Status: 200 - Duration: 1362.28ms
2026-01-15 06:14:00,911 - uvicorn.access - INFO - 127.0.0.1:50114 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 200
2026-01-15 06:14:01,519 - app - INFO - Request: GET /api/v1/crypto-payments/currencies - Status: 200 - Duration: 531.68ms
2026-01-15 06:14:01,519 - uvicorn.access - INFO - 127.0.0.1:46426 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 200
2026-01-15 06:14:01,762 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 836.04ms
2026-01-15 06:14:01,762 - uvicorn.access - INFO - 127.0.0.1:46422 - "GET /api/v1/crypto-payments/estimate?amount=990&currency_from=usd&currency_to=btc HTTP/1.1" 200
2026-01-15 06:17:31,365 - app - INFO - Request: GET /api/v1/crypto-payments/currencies - Status: 200 - Duration: 470.63ms
2026-01-15 06:17:31,365 - uvicorn.access - INFO - 127.0.0.1:39354 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 200
2026-01-15 06:17:31,472 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 551.10ms
2026-01-15 06:17:31,472 - uvicorn.access - INFO - 127.0.0.1:39358 - "GET /api/v1/crypto-payments/estimate?amount=990&currency_from=usd&currency_to=btc HTTP/1.1" 200
2026-01-15 06:17:31,838 - app - INFO - Request: GET /api/v1/crypto-payments/currencies - Status: 200 - Duration: 463.85ms
2026-01-15 06:17:31,838 - uvicorn.access - INFO - 127.0.0.1:39368 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 200
2026-01-15 06:17:32,160 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 678.53ms
2026-01-15 06:17:32,160 - uvicorn.access - INFO - 127.0.0.1:39378 - "GET /api/v1/crypto-payments/estimate?amount=990&currency_from=usd&currency_to=btc HTTP/1.1" 200
2026-01-15 06:17:40,602 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 7.33ms
2026-01-15 06:17:40,602 - uvicorn.access - INFO - 127.0.0.1:52278 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 06:17:40,647 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 22.68ms
2026-01-15 06:17:40,647 - uvicorn.access - INFO - 127.0.0.1:52292 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 06:17:42,023 - app - INFO - Request: POST /api/v1/crypto-payments/payment - Status: 200 - Duration: 1363.42ms
2026-01-15 06:17:42,023 - uvicorn.access - INFO - 127.0.0.1:52294 - "POST /api/v1/crypto-payments/payment HTTP/1.1" 200
2026-01-15 06:17:59,595 - app - INFO - Request: GET /api/v1/crypto-payments/payment/6432499794/status - Status: 200 - Duration: 1090.31ms
2026-01-15 06:17:59,595 - uvicorn.access - INFO - 127.0.0.1:39104 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 200
2026-01-15 06:18:12,683 - app - INFO - Request: GET /api/v1/crypto-payments/payment/6432499794/status - Status: 200 - Duration: 587.44ms
2026-01-15 06:18:12,684 - uvicorn.access - INFO - 127.0.0.1:53272 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 200
2026-01-15 06:18:37,044 - app - INFO - Request: GET /api/v1/crypto-payments/payment/6432499794/status - Status: 200 - Duration: 488.23ms
2026-01-15 06:18:37,044 - uvicorn.access - INFO - 127.0.0.1:56272 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 200
2026-01-15 06:18:42,742 - app - INFO - Request: GET /api/v1/crypto-payments/payment/6432499794/status - Status: 200 - Duration: 640.07ms
2026-01-15 06:18:42,742 - uvicorn.access - INFO - 127.0.0.1:41776 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 200
2026-01-15 06:19:17,164 - app - ERROR - Request failed: GET /api/v1/crypto-payments/payment/6432499794/status - Duration: 5067.47ms - Error: 
2026-01-15 06:19:17,178 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 110, in get_payment_status
    return await service.get_payment_status(payment_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 179, in get_payment_status
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-15 06:19:17,178 - uvicorn.access - INFO - 127.0.0.1:35604 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 500
2026-01-15 06:19:42,650 - app - INFO - Request: GET /api/v1/crypto-payments/payment/6432499794/status - Status: 200 - Duration: 555.06ms
2026-01-15 06:19:42,651 - uvicorn.access - INFO - 127.0.0.1:44086 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 200
2026-01-15 06:20:12,664 - app - INFO - Request: GET /api/v1/crypto-payments/payment/6432499794/status - Status: 200 - Duration: 568.04ms
2026-01-15 06:20:12,664 - uvicorn.access - INFO - 127.0.0.1:51954 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 200
2026-01-15 06:20:42,617 - app - INFO - Request: GET /api/v1/crypto-payments/payment/6432499794/status - Status: 200 - Duration: 521.87ms
2026-01-15 06:20:42,617 - uvicorn.access - INFO - 127.0.0.1:48894 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 200
2026-01-15 06:20:48,846 - app - INFO - Request: GET /api/v1/crypto-payments/payment/6432499794/status - Status: 200 - Duration: 519.04ms
2026-01-15 06:20:48,846 - uvicorn.access - INFO - 127.0.0.1:48900 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 200
2026-01-15 06:21:12,797 - app - INFO - Request: GET /api/v1/crypto-payments/payment/6432499794/status - Status: 200 - Duration: 702.22ms
2026-01-15 06:21:12,798 - uvicorn.access - INFO - 127.0.0.1:37532 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 200
2026-01-15 06:21:42,658 - app - INFO - Request: GET /api/v1/crypto-payments/payment/6432499794/status - Status: 200 - Duration: 561.71ms
2026-01-15 06:21:42,658 - uvicorn.access - INFO - 127.0.0.1:34234 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 200
2026-01-15 06:22:12,631 - app - INFO - Request: GET /api/v1/crypto-payments/payment/6432499794/status - Status: 200 - Duration: 537.75ms
2026-01-15 06:22:12,631 - uvicorn.access - INFO - 127.0.0.1:51044 - "GET /api/v1/crypto-payments/payment/6432499794/status HTTP/1.1" 200
2026-01-15 06:22:29,838 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 15.16ms
2026-01-15 06:22:29,839 - uvicorn.access - INFO - 127.0.0.1:52914 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 06:22:29,904 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 45.63ms
2026-01-15 06:22:29,905 - uvicorn.access - INFO - 127.0.0.1:52918 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 06:22:29,911 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 37.13ms
2026-01-15 06:22:29,911 - uvicorn.access - INFO - 127.0.0.1:52924 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 06:22:29,935 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 13.07ms
2026-01-15 06:22:29,935 - uvicorn.access - INFO - 127.0.0.1:52938 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 06:33:07,864 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 8.68ms
2026-01-15 06:33:07,864 - uvicorn.access - INFO - 127.0.0.1:49318 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 06:33:07,882 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 7.73ms
2026-01-15 06:33:07,882 - uvicorn.access - INFO - 127.0.0.1:49330 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 06:33:09,927 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 13.59ms
2026-01-15 06:33:09,927 - uvicorn.access - INFO - 127.0.0.1:53286 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 06:33:09,953 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 18.65ms
2026-01-15 06:33:09,954 - uvicorn.access - INFO - 127.0.0.1:53290 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 06:33:22,935 - app - INFO - Request: GET /api/v1/users/referrals - Status: 200 - Duration: 13.31ms
2026-01-15 06:33:22,935 - uvicorn.access - INFO - 127.0.0.1:37246 - "GET /api/v1/users/referrals HTTP/1.1" 200
2026-01-15 06:33:22,972 - app - INFO - Request: GET /api/v1/users/referrals - Status: 200 - Duration: 22.22ms
2026-01-15 06:33:22,972 - uvicorn.access - INFO - 127.0.0.1:37252 - "GET /api/v1/users/referrals HTTP/1.1" 200
2026-01-15 06:33:23,877 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 16.96ms
2026-01-15 06:33:23,877 - uvicorn.access - INFO - 127.0.0.1:37260 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 06:33:23,908 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 21.29ms
2026-01-15 06:33:23,908 - uvicorn.access - INFO - 127.0.0.1:37264 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 06:33:24,879 - app - INFO - Request: GET /api/v1/users/referrals - Status: 200 - Duration: 14.90ms
2026-01-15 06:33:24,879 - uvicorn.access - INFO - 127.0.0.1:37272 - "GET /api/v1/users/referrals HTTP/1.1" 200
2026-01-15 06:33:24,915 - app - INFO - Request: GET /api/v1/users/referrals - Status: 200 - Duration: 16.25ms
2026-01-15 06:33:24,915 - uvicorn.access - INFO - 127.0.0.1:37278 - "GET /api/v1/users/referrals HTTP/1.1" 200
2026-01-15 06:33:29,125 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 19.91ms
2026-01-15 06:33:29,126 - uvicorn.access - INFO - 127.0.0.1:37284 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 06:33:29,159 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 21.43ms
2026-01-15 06:33:29,159 - uvicorn.access - INFO - 127.0.0.1:37294 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 06:33:30,146 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 12.44ms
2026-01-15 06:33:30,146 - uvicorn.access - INFO - 127.0.0.1:45798 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 06:33:30,178 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 18.06ms
2026-01-15 06:33:30,178 - uvicorn.access - INFO - 127.0.0.1:45806 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 06:33:31,233 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 13.97ms
2026-01-15 06:33:31,234 - uvicorn.access - INFO - 127.0.0.1:45808 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 06:33:31,261 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 15.67ms
2026-01-15 06:33:31,261 - uvicorn.access - INFO - 127.0.0.1:45810 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 06:33:32,776 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 6.79ms
2026-01-15 06:33:32,776 - uvicorn.access - INFO - 127.0.0.1:45818 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 06:33:32,797 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 10.48ms
2026-01-15 06:33:32,797 - uvicorn.access - INFO - 127.0.0.1:45834 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 06:33:33,503 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 10.12ms
2026-01-15 06:33:33,504 - uvicorn.access - INFO - 127.0.0.1:45840 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 06:33:33,524 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 12.47ms
2026-01-15 06:33:33,524 - uvicorn.access - INFO - 127.0.0.1:45852 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 06:51:26,599 - uvicorn.error - INFO - Shutting down
2026-01-15 06:51:26,700 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 06:51:26,701 - app - INFO - Shutting down application...
2026-01-15 06:51:26,701 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 06:51:26,701 - uvicorn.error - INFO - Finished server process [25463]
2026-01-15 06:51:28,584 - uvicorn.error - INFO - Started server process [59753]
2026-01-15 06:51:28,584 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:51:28,585 - app - INFO - Starting up application...
2026-01-15 06:51:28,595 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:51:29,899 - uvicorn.error - INFO - Shutting down
2026-01-15 06:51:30,000 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 06:51:30,000 - app - INFO - Shutting down application...
2026-01-15 06:51:30,000 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 06:51:30,000 - uvicorn.error - INFO - Finished server process [59753]
2026-01-15 06:51:31,300 - uvicorn.error - INFO - Started server process [59815]
2026-01-15 06:51:31,300 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:51:31,301 - app - INFO - Starting up application...
2026-01-15 06:51:31,308 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:51:34,427 - uvicorn.error - INFO - Shutting down
2026-01-15 06:51:34,528 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 06:51:34,528 - app - INFO - Shutting down application...
2026-01-15 06:51:34,529 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 06:51:34,529 - uvicorn.error - INFO - Finished server process [59815]
2026-01-15 06:51:36,569 - uvicorn.error - INFO - Started server process [59895]
2026-01-15 06:51:36,570 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:51:36,570 - app - INFO - Starting up application...
2026-01-15 06:51:36,585 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:51:37,091 - uvicorn.error - INFO - Shutting down
2026-01-15 06:51:37,195 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 06:51:37,195 - app - INFO - Shutting down application...
2026-01-15 06:51:37,196 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 06:51:37,197 - uvicorn.error - INFO - Finished server process [59895]
2026-01-15 06:51:38,523 - uvicorn.error - INFO - Started server process [59952]
2026-01-15 06:51:38,523 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:51:38,524 - app - INFO - Starting up application...
2026-01-15 06:51:38,531 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:51:39,908 - uvicorn.error - INFO - Started server process [59969]
2026-01-15 06:51:39,909 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:51:39,910 - app - INFO - Starting up application...
2026-01-15 06:51:39,928 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:51:59,597 - uvicorn.error - INFO - Shutting down
2026-01-15 06:51:59,698 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 06:51:59,698 - app - INFO - Shutting down application...
2026-01-15 06:51:59,698 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 06:51:59,698 - uvicorn.error - INFO - Finished server process [59969]
2026-01-15 06:52:01,213 - uvicorn.error - INFO - Started server process [60276]
2026-01-15 06:52:01,213 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:52:01,213 - app - INFO - Starting up application...
2026-01-15 06:52:01,222 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:52:10,748 - uvicorn.error - INFO - Shutting down
2026-01-15 06:52:10,849 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 06:52:10,849 - app - INFO - Shutting down application...
2026-01-15 06:52:10,849 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 06:52:10,850 - uvicorn.error - INFO - Finished server process [60276]
2026-01-15 06:52:12,098 - uvicorn.error - INFO - Started server process [60493]
2026-01-15 06:52:12,099 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:52:12,099 - app - INFO - Starting up application...
2026-01-15 06:52:12,106 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:52:34,676 - app - INFO - Request: GET /docs - Status: 200 - Duration: 0.85ms
2026-01-15 06:52:34,676 - uvicorn.access - INFO - 127.0.0.1:44092 - "GET /docs HTTP/1.1" 200
2026-01-15 06:52:53,306 - app - INFO - Request: GET /openapi.json - Status: 200 - Duration: 151.34ms
2026-01-15 06:52:53,306 - uvicorn.access - INFO - 127.0.0.1:59572 - "GET /openapi.json HTTP/1.1" 200
2026-01-15 06:53:06,855 - app - INFO - Request: GET /openapi.json - Status: 200 - Duration: 3.27ms
2026-01-15 06:53:06,855 - uvicorn.access - INFO - 127.0.0.1:39660 - "GET /openapi.json HTTP/1.1" 200
2026-01-15 06:59:10,947 - uvicorn.error - INFO - Shutting down
2026-01-15 06:59:11,047 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 06:59:11,048 - app - INFO - Shutting down application...
2026-01-15 06:59:11,048 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 06:59:11,049 - uvicorn.error - INFO - Finished server process [60493]
2026-01-15 06:59:12,912 - uvicorn.error - INFO - Started server process [66533]
2026-01-15 06:59:12,913 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:59:12,913 - app - INFO - Starting up application...
2026-01-15 06:59:12,931 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:59:15,044 - uvicorn.error - INFO - Shutting down
2026-01-15 06:59:15,145 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 06:59:15,145 - app - INFO - Shutting down application...
2026-01-15 06:59:15,145 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 06:59:15,146 - uvicorn.error - INFO - Finished server process [66533]
2026-01-15 06:59:16,713 - uvicorn.error - INFO - Started server process [66645]
2026-01-15 06:59:16,714 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:59:16,714 - app - INFO - Starting up application...
2026-01-15 06:59:16,723 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:59:39,811 - uvicorn.error - INFO - Shutting down
2026-01-15 06:59:39,914 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 06:59:39,914 - app - INFO - Shutting down application...
2026-01-15 06:59:39,915 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 06:59:39,915 - uvicorn.error - INFO - Finished server process [66645]
2026-01-15 06:59:41,695 - uvicorn.error - INFO - Started server process [67007]
2026-01-15 06:59:41,696 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:59:41,696 - app - INFO - Starting up application...
2026-01-15 06:59:41,709 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:59:46,733 - uvicorn.error - INFO - Shutting down
2026-01-15 06:59:46,834 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 06:59:46,834 - app - INFO - Shutting down application...
2026-01-15 06:59:46,834 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 06:59:46,834 - uvicorn.error - INFO - Finished server process [67007]
2026-01-15 06:59:48,445 - uvicorn.error - INFO - Started server process [67152]
2026-01-15 06:59:48,445 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:59:48,446 - app - INFO - Starting up application...
2026-01-15 06:59:48,452 - uvicorn.error - INFO - Application startup complete.
2026-01-15 06:59:50,052 - uvicorn.error - INFO - Started server process [67177]
2026-01-15 06:59:50,053 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 06:59:50,053 - app - INFO - Starting up application...
2026-01-15 06:59:50,068 - uvicorn.error - INFO - Application startup complete.
2026-01-15 07:00:05,622 - app - ERROR - Request failed: GET /openapi.json - Duration: 109.03ms - Error: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined
2026-01-15 07:00:05,642 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 78, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 75, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1089, in openapi
    |     return JSONResponse(self.openapi())
    |                         ~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1060, in openapi
    |     self.openapi_schema = get_openapi(
    |                           ~~~~~~~~~~~^
    |         title=self.title,
    |         ^^^^^^^^^^^^^^^^^
    |     ...<12 lines>...
    |         external_docs=self.openapi_external_docs,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/openapi/utils.py", line 504, in get_openapi
    |     field_mapping, definitions = get_definitions(
    |                                  ~~~~~~~~~~~~~~~^
    |         fields=all_fields,
    |         ^^^^^^^^^^^^^^^^^^
    |         model_name_map=model_name_map,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |         separate_input_output_schemas=separate_input_output_schemas,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/main.py", line 292, in get_definitions
    |     v2_field_maps, v2_definitions = v2.get_definitions(
    |                                     ~~~~~~~~~~~~~~~~~~^
    |         fields=v2_fields,
    |         ^^^^^^^^^^^^^^^^^
    |         model_name_map=model_name_map,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |         separate_input_output_schemas=separate_input_output_schemas,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/v2.py", line 244, in get_definitions
    |     field_mapping, definitions = schema_generator.generate_definitions(inputs=inputs)
    |                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 379, in generate_definitions
    |     self.generate_inner(schema)
    |     ~~~~~~~~~~~~~~~~~~~^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 459, in generate_inner
    |     if 'ref' in schema:
    |        ^^^^^^^^^^^^^^^
    |   File "<frozen _collections_abc>", line 817, in __contains__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    |     return self._get_built().__getitem__(key)
    |            ~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    |     raise PydanticUserError(self._error_message, code=self._code)
    | pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.
    | 
    | For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1089, in openapi
    return JSONResponse(self.openapi())
                        ~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1060, in openapi
    self.openapi_schema = get_openapi(
                          ~~~~~~~~~~~^
        title=self.title,
        ^^^^^^^^^^^^^^^^^
    ...<12 lines>...
        external_docs=self.openapi_external_docs,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/openapi/utils.py", line 504, in get_openapi
    field_mapping, definitions = get_definitions(
                                 ~~~~~~~~~~~~~~~^
        fields=all_fields,
        ^^^^^^^^^^^^^^^^^^
        model_name_map=model_name_map,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        separate_input_output_schemas=separate_input_output_schemas,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/main.py", line 292, in get_definitions
    v2_field_maps, v2_definitions = v2.get_definitions(
                                    ~~~~~~~~~~~~~~~~~~^
        fields=v2_fields,
        ^^^^^^^^^^^^^^^^^
        model_name_map=model_name_map,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        separate_input_output_schemas=separate_input_output_schemas,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/v2.py", line 244, in get_definitions
    field_mapping, definitions = schema_generator.generate_definitions(inputs=inputs)
                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 379, in generate_definitions
    self.generate_inner(schema)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 459, in generate_inner
    if 'ref' in schema:
       ^^^^^^^^^^^^^^^
  File "<frozen _collections_abc>", line 817, in __contains__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    return self._get_built().__getitem__(key)
           ~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    raise PydanticUserError(self._error_message, code=self._code)
pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined

2026-01-15 07:00:05,643 - uvicorn.access - INFO - 127.0.0.1:34682 - "GET /openapi.json HTTP/1.1" 500
2026-01-15 07:00:15,378 - app - INFO - Request: GET /docs - Status: 200 - Duration: 1.02ms
2026-01-15 07:00:15,378 - uvicorn.access - INFO - 127.0.0.1:40820 - "GET /docs HTTP/1.1" 200
2026-01-15 07:01:08,672 - app - ERROR - Request failed: GET /openapi.json - Duration: 108.61ms - Error: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined
2026-01-15 07:01:08,677 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 78, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 75, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1089, in openapi
    |     return JSONResponse(self.openapi())
    |                         ~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1060, in openapi
    |     self.openapi_schema = get_openapi(
    |                           ~~~~~~~~~~~^
    |         title=self.title,
    |         ^^^^^^^^^^^^^^^^^
    |     ...<12 lines>...
    |         external_docs=self.openapi_external_docs,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/openapi/utils.py", line 504, in get_openapi
    |     field_mapping, definitions = get_definitions(
    |                                  ~~~~~~~~~~~~~~~^
    |         fields=all_fields,
    |         ^^^^^^^^^^^^^^^^^^
    |         model_name_map=model_name_map,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |         separate_input_output_schemas=separate_input_output_schemas,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/main.py", line 292, in get_definitions
    |     v2_field_maps, v2_definitions = v2.get_definitions(
    |                                     ~~~~~~~~~~~~~~~~~~^
    |         fields=v2_fields,
    |         ^^^^^^^^^^^^^^^^^
    |         model_name_map=model_name_map,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |         separate_input_output_schemas=separate_input_output_schemas,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/v2.py", line 244, in get_definitions
    |     field_mapping, definitions = schema_generator.generate_definitions(inputs=inputs)
    |                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 379, in generate_definitions
    |     self.generate_inner(schema)
    |     ~~~~~~~~~~~~~~~~~~~^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 459, in generate_inner
    |     if 'ref' in schema:
    |        ^^^^^^^^^^^^^^^
    |   File "<frozen _collections_abc>", line 817, in __contains__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    |     return self._get_built().__getitem__(key)
    |            ~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    |     raise PydanticUserError(self._error_message, code=self._code)
    | pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.
    | 
    | For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1089, in openapi
    return JSONResponse(self.openapi())
                        ~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1060, in openapi
    self.openapi_schema = get_openapi(
                          ~~~~~~~~~~~^
        title=self.title,
        ^^^^^^^^^^^^^^^^^
    ...<12 lines>...
        external_docs=self.openapi_external_docs,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/openapi/utils.py", line 504, in get_openapi
    field_mapping, definitions = get_definitions(
                                 ~~~~~~~~~~~~~~~^
        fields=all_fields,
        ^^^^^^^^^^^^^^^^^^
        model_name_map=model_name_map,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        separate_input_output_schemas=separate_input_output_schemas,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/main.py", line 292, in get_definitions
    v2_field_maps, v2_definitions = v2.get_definitions(
                                    ~~~~~~~~~~~~~~~~~~^
        fields=v2_fields,
        ^^^^^^^^^^^^^^^^^
        model_name_map=model_name_map,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        separate_input_output_schemas=separate_input_output_schemas,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/v2.py", line 244, in get_definitions
    field_mapping, definitions = schema_generator.generate_definitions(inputs=inputs)
                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 379, in generate_definitions
    self.generate_inner(schema)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 459, in generate_inner
    if 'ref' in schema:
       ^^^^^^^^^^^^^^^
  File "<frozen _collections_abc>", line 817, in __contains__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    return self._get_built().__getitem__(key)
           ~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    raise PydanticUserError(self._error_message, code=self._code)
pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined

2026-01-15 07:01:08,678 - uvicorn.access - INFO - 127.0.0.1:54064 - "GET /openapi.json HTTP/1.1" 500
2026-01-15 07:01:25,318 - app - INFO - Request: GET /api/v1/crypto-payments/ - Status: 307 - Duration: 0.92ms
2026-01-15 07:01:25,318 - uvicorn.access - INFO - 127.0.0.1:37906 - "GET /api/v1/crypto-payments/ HTTP/1.1" 307
2026-01-15 07:08:24,649 - app - INFO - Request: GET /api/v1/users/me - Status: 403 - Duration: 11.26ms
2026-01-15 07:08:24,650 - uvicorn.access - INFO - 127.0.0.1:49882 - "GET /api/v1/users/me HTTP/1.1" 403
2026-01-15 07:08:24,675 - app - INFO - Request: GET /api/v1/prop-firm - Status: 403 - Duration: 2.33ms
2026-01-15 07:08:24,675 - uvicorn.access - INFO - 127.0.0.1:49886 - "GET /api/v1/prop-firm HTTP/1.1" 403
2026-01-15 07:08:47,265 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 333.28ms
2026-01-15 07:08:47,265 - uvicorn.access - INFO - 127.0.0.1:51144 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-15 07:08:48,362 - app - ERROR - Request failed: GET /api/v1/users/me - Duration: 31.51ms - Error: (sqlite3.OperationalError) no such column: prop_firm_registration.payment_status
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.payment_status AS prop_firm_registration_payment_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-15 07:08:48,386 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlite3.OperationalError: no such column: prop_firm_registration.payment_status

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 641, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/dependencies/auth.py", line 44, in get_current_user
    result = await session.exec(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/ext/asyncio/session.py", line 98, in exec
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 83, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 262, in instances
    _prebuffered = list(chunks(None))
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 247, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1564, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3338, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3414, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: prop_firm_registration.payment_status
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.payment_status AS prop_firm_registration_payment_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2026-01-15 07:08:48,386 - uvicorn.access - INFO - 127.0.0.1:51148 - "GET /api/v1/users/me HTTP/1.1" 500
2026-01-15 07:08:48,448 - app - ERROR - Request failed: GET /api/v1/users/me - Duration: 53.58ms - Error: (sqlite3.OperationalError) no such column: prop_firm_registration.payment_status
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.payment_status AS prop_firm_registration_payment_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-15 07:08:48,457 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlite3.OperationalError: no such column: prop_firm_registration.payment_status

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 641, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/dependencies/auth.py", line 44, in get_current_user
    result = await session.exec(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/ext/asyncio/session.py", line 98, in exec
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 83, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 262, in instances
    _prebuffered = list(chunks(None))
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 247, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1564, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3338, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3414, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: prop_firm_registration.payment_status
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.payment_status AS prop_firm_registration_payment_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2026-01-15 07:08:48,458 - uvicorn.access - INFO - 127.0.0.1:51150 - "GET /api/v1/users/me HTTP/1.1" 500
2026-01-15 07:08:48,470 - app - ERROR - Request failed: GET /api/v1/prop-firm - Duration: 47.94ms - Error: (sqlite3.OperationalError) no such column: prop_firm_registration.payment_status
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.payment_status AS prop_firm_registration_payment_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-15 07:08:48,482 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlite3.OperationalError: no such column: prop_firm_registration.payment_status

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 641, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/dependencies/auth.py", line 44, in get_current_user
    result = await session.exec(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/ext/asyncio/session.py", line 98, in exec
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 83, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 262, in instances
    _prebuffered = list(chunks(None))
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 247, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1564, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3338, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3414, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: prop_firm_registration.payment_status
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.payment_status AS prop_firm_registration_payment_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2026-01-15 07:08:48,483 - uvicorn.access - INFO - 127.0.0.1:51164 - "GET /api/v1/prop-firm HTTP/1.1" 500
2026-01-15 07:08:48,501 - app - ERROR - Request failed: GET /api/v1/prop-firm - Duration: 12.76ms - Error: (sqlite3.OperationalError) no such column: prop_firm_registration.payment_status
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.payment_status AS prop_firm_registration_payment_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-15 07:08:48,511 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlite3.OperationalError: no such column: prop_firm_registration.payment_status

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 641, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/dependencies/auth.py", line 44, in get_current_user
    result = await session.exec(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/ext/asyncio/session.py", line 98, in exec
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 83, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        result,
        ^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 262, in instances
    _prebuffered = list(chunks(None))
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 247, in chunks
    post_load.invoke(context, path)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1564, in invoke
    loader(
    ~~~~~~^
        effective_context, path, states, self.load_keys, *arg, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3338, in _load_for_path
    self._load_via_parent(
    ~~~~~~~~~~~~~~~~~~~~~^
        our_states, query_info, q, context, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 3414, in _load_via_parent
    context.session.execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        q,
        ^^
        params={"primary_keys": primary_keys},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        execution_options=execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).unique(),
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: prop_firm_registration.payment_status
[SQL: SELECT prop_firm_registration.user_id AS prop_firm_registration_user_id, prop_firm_registration.id AS prop_firm_registration_id, prop_firm_registration.login_id AS prop_firm_registration_login_id, prop_firm_registration.password AS prop_firm_registration_password, prop_firm_registration.propfirm_name AS prop_firm_registration_propfirm_name, prop_firm_registration.propfirm_website_link AS prop_firm_registration_propfirm_website_link, prop_firm_registration.server_name AS prop_firm_registration_server_name, prop_firm_registration.server_type AS prop_firm_registration_server_type, prop_firm_registration.challenges_step AS prop_firm_registration_challenges_step, prop_firm_registration.service_scope AS prop_firm_registration_service_scope, prop_firm_registration.order_id AS prop_firm_registration_order_id, prop_firm_registration.propfirm_account_cost AS prop_firm_registration_propfirm_account_cost, prop_firm_registration.account_size AS prop_firm_registration_account_size, prop_firm_registration.account_phases AS prop_firm_registration_account_phases, prop_firm_registration.trading_platform AS prop_firm_registration_trading_platform, prop_firm_registration.propfirm_rules AS prop_firm_registration_propfirm_rules, prop_firm_registration.whatsapp_no AS prop_firm_registration_whatsapp_no, prop_firm_registration.telegram_username AS prop_firm_registration_telegram_username, prop_firm_registration.account_status AS prop_firm_registration_account_status, prop_firm_registration.payment_status AS prop_firm_registration_payment_status, prop_firm_registration.created_at AS prop_firm_registration_created_at, prop_firm_registration.updated_at AS prop_firm_registration_updated_at 
FROM prop_firm_registration 
WHERE prop_firm_registration.user_id IN (?)]
[parameters: ('6affb04777824af5acc7646740ae90f3',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2026-01-15 07:08:48,511 - uvicorn.access - INFO - 127.0.0.1:51178 - "GET /api/v1/prop-firm HTTP/1.1" 500
2026-01-15 07:11:54,257 - uvicorn.error - INFO - Shutting down
2026-01-15 07:11:54,358 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 07:11:54,358 - app - INFO - Shutting down application...
2026-01-15 07:11:54,359 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 07:11:54,359 - uvicorn.error - INFO - Finished server process [67177]
2026-01-15 07:11:56,846 - uvicorn.error - INFO - Started server process [77762]
2026-01-15 07:11:56,847 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 07:11:56,848 - app - INFO - Starting up application...
2026-01-15 07:11:56,882 - uvicorn.error - INFO - Application startup complete.
2026-01-15 07:11:59,214 - uvicorn.error - INFO - Started server process [77788]
2026-01-15 07:11:59,215 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 07:11:59,216 - app - INFO - Starting up application...
2026-01-15 07:11:59,278 - uvicorn.error - INFO - Application startup complete.
2026-01-15 07:12:58,737 - uvicorn.error - INFO - Shutting down
2026-01-15 07:12:58,839 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 07:12:58,840 - app - INFO - Shutting down application...
2026-01-15 07:12:58,841 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 07:12:58,842 - uvicorn.error - INFO - Finished server process [77788]
2026-01-15 07:13:01,681 - uvicorn.error - INFO - Started server process [78709]
2026-01-15 07:13:01,682 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 07:13:01,683 - app - INFO - Starting up application...
2026-01-15 07:13:01,693 - uvicorn.error - INFO - Application startup complete.
2026-01-15 07:13:05,016 - app - INFO - Root endpoint accessed
2026-01-15 07:13:05,017 - app - INFO - Request: GET / - Status: 200 - Duration: 3.20ms
2026-01-15 07:13:05,018 - uvicorn.access - INFO - 127.0.0.1:40794 - "GET / HTTP/1.1" 200
2026-01-15 07:13:37,270 - uvicorn.error - INFO - Shutting down
2026-01-15 07:13:37,371 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 07:13:37,373 - app - INFO - Shutting down application...
2026-01-15 07:13:37,373 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 07:13:37,375 - uvicorn.error - INFO - Finished server process [78709]
2026-01-15 07:13:39,424 - uvicorn.error - INFO - Started server process [79392]
2026-01-15 07:13:39,424 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 07:13:39,424 - app - INFO - Starting up application...
2026-01-15 07:13:39,444 - uvicorn.error - INFO - Application startup complete.
2026-01-15 07:14:59,465 - app - INFO - Request: GET /api/v1/prop-firm-registrations/ - Status: 404 - Duration: 1.20ms
2026-01-15 07:14:59,466 - uvicorn.access - INFO - 127.0.0.1:49534 - "GET /api/v1/prop-firm-registrations/ HTTP/1.1" 404
2026-01-15 07:15:17,378 - app - ERROR - Request failed: GET /openapi.json - Duration: 141.91ms - Error: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined
2026-01-15 07:15:17,391 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 78, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 75, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1089, in openapi
    |     return JSONResponse(self.openapi())
    |                         ~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1060, in openapi
    |     self.openapi_schema = get_openapi(
    |                           ~~~~~~~~~~~^
    |         title=self.title,
    |         ^^^^^^^^^^^^^^^^^
    |     ...<12 lines>...
    |         external_docs=self.openapi_external_docs,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/openapi/utils.py", line 504, in get_openapi
    |     field_mapping, definitions = get_definitions(
    |                                  ~~~~~~~~~~~~~~~^
    |         fields=all_fields,
    |         ^^^^^^^^^^^^^^^^^^
    |         model_name_map=model_name_map,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |         separate_input_output_schemas=separate_input_output_schemas,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/main.py", line 292, in get_definitions
    |     v2_field_maps, v2_definitions = v2.get_definitions(
    |                                     ~~~~~~~~~~~~~~~~~~^
    |         fields=v2_fields,
    |         ^^^^^^^^^^^^^^^^^
    |         model_name_map=model_name_map,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |         separate_input_output_schemas=separate_input_output_schemas,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/v2.py", line 244, in get_definitions
    |     field_mapping, definitions = schema_generator.generate_definitions(inputs=inputs)
    |                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 379, in generate_definitions
    |     self.generate_inner(schema)
    |     ~~~~~~~~~~~~~~~~~~~^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 459, in generate_inner
    |     if 'ref' in schema:
    |        ^^^^^^^^^^^^^^^
    |   File "<frozen _collections_abc>", line 817, in __contains__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    |     return self._get_built().__getitem__(key)
    |            ~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    |     raise PydanticUserError(self._error_message, code=self._code)
    | pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.
    | 
    | For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1089, in openapi
    return JSONResponse(self.openapi())
                        ~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1060, in openapi
    self.openapi_schema = get_openapi(
                          ~~~~~~~~~~~^
        title=self.title,
        ^^^^^^^^^^^^^^^^^
    ...<12 lines>...
        external_docs=self.openapi_external_docs,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/openapi/utils.py", line 504, in get_openapi
    field_mapping, definitions = get_definitions(
                                 ~~~~~~~~~~~~~~~^
        fields=all_fields,
        ^^^^^^^^^^^^^^^^^^
        model_name_map=model_name_map,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        separate_input_output_schemas=separate_input_output_schemas,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/main.py", line 292, in get_definitions
    v2_field_maps, v2_definitions = v2.get_definitions(
                                    ~~~~~~~~~~~~~~~~~~^
        fields=v2_fields,
        ^^^^^^^^^^^^^^^^^
        model_name_map=model_name_map,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        separate_input_output_schemas=separate_input_output_schemas,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/v2.py", line 244, in get_definitions
    field_mapping, definitions = schema_generator.generate_definitions(inputs=inputs)
                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 379, in generate_definitions
    self.generate_inner(schema)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 459, in generate_inner
    if 'ref' in schema:
       ^^^^^^^^^^^^^^^
  File "<frozen _collections_abc>", line 817, in __contains__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    return self._get_built().__getitem__(key)
           ~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    raise PydanticUserError(self._error_message, code=self._code)
pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined

2026-01-15 07:15:17,394 - uvicorn.access - INFO - 127.0.0.1:54208 - "GET /openapi.json HTTP/1.1" 500
2026-01-15 07:15:25,639 - app - ERROR - Request failed: GET /openapi.json - Duration: 128.82ms - Error: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined
2026-01-15 07:15:25,648 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 78, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 75, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1089, in openapi
    |     return JSONResponse(self.openapi())
    |                         ~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1060, in openapi
    |     self.openapi_schema = get_openapi(
    |                           ~~~~~~~~~~~^
    |         title=self.title,
    |         ^^^^^^^^^^^^^^^^^
    |     ...<12 lines>...
    |         external_docs=self.openapi_external_docs,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/openapi/utils.py", line 504, in get_openapi
    |     field_mapping, definitions = get_definitions(
    |                                  ~~~~~~~~~~~~~~~^
    |         fields=all_fields,
    |         ^^^^^^^^^^^^^^^^^^
    |         model_name_map=model_name_map,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |         separate_input_output_schemas=separate_input_output_schemas,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/main.py", line 292, in get_definitions
    |     v2_field_maps, v2_definitions = v2.get_definitions(
    |                                     ~~~~~~~~~~~~~~~~~~^
    |         fields=v2_fields,
    |         ^^^^^^^^^^^^^^^^^
    |         model_name_map=model_name_map,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |         separate_input_output_schemas=separate_input_output_schemas,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/v2.py", line 244, in get_definitions
    |     field_mapping, definitions = schema_generator.generate_definitions(inputs=inputs)
    |                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 379, in generate_definitions
    |     self.generate_inner(schema)
    |     ~~~~~~~~~~~~~~~~~~~^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 459, in generate_inner
    |     if 'ref' in schema:
    |        ^^^^^^^^^^^^^^^
    |   File "<frozen _collections_abc>", line 817, in __contains__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    |     return self._get_built().__getitem__(key)
    |            ~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    |     raise PydanticUserError(self._error_message, code=self._code)
    | pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.
    | 
    | For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1089, in openapi
    return JSONResponse(self.openapi())
                        ~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1060, in openapi
    self.openapi_schema = get_openapi(
                          ~~~~~~~~~~~^
        title=self.title,
        ^^^^^^^^^^^^^^^^^
    ...<12 lines>...
        external_docs=self.openapi_external_docs,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/openapi/utils.py", line 504, in get_openapi
    field_mapping, definitions = get_definitions(
                                 ~~~~~~~~~~~~~~~^
        fields=all_fields,
        ^^^^^^^^^^^^^^^^^^
        model_name_map=model_name_map,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        separate_input_output_schemas=separate_input_output_schemas,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/main.py", line 292, in get_definitions
    v2_field_maps, v2_definitions = v2.get_definitions(
                                    ~~~~~~~~~~~~~~~~~~^
        fields=v2_fields,
        ^^^^^^^^^^^^^^^^^
        model_name_map=model_name_map,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        separate_input_output_schemas=separate_input_output_schemas,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/v2.py", line 244, in get_definitions
    field_mapping, definitions = schema_generator.generate_definitions(inputs=inputs)
                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 379, in generate_definitions
    self.generate_inner(schema)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/json_schema.py", line 459, in generate_inner
    if 'ref' in schema:
       ^^^^^^^^^^^^^^^
  File "<frozen _collections_abc>", line 817, in __contains__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    return self._get_built().__getitem__(key)
           ~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    raise PydanticUserError(self._error_message, code=self._code)
pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined

2026-01-15 07:15:25,651 - uvicorn.access - INFO - 127.0.0.1:44292 - "GET /openapi.json HTTP/1.1" 500
2026-01-15 07:15:59,201 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 63.71ms
2026-01-15 07:15:59,202 - uvicorn.access - INFO - 127.0.0.1:41978 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 07:15:59,225 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 13.41ms
2026-01-15 07:15:59,225 - uvicorn.access - INFO - 127.0.0.1:41982 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 07:16:06,850 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 302.28ms
2026-01-15 07:16:06,850 - uvicorn.access - INFO - 127.0.0.1:59248 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-15 07:16:07,928 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 15.60ms
2026-01-15 07:16:07,928 - uvicorn.access - INFO - 127.0.0.1:59254 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 07:16:07,976 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 29.45ms
2026-01-15 07:16:07,976 - uvicorn.access - INFO - 127.0.0.1:59256 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 07:16:07,990 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 32.42ms
2026-01-15 07:16:07,990 - uvicorn.access - INFO - 127.0.0.1:59270 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 07:16:08,035 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 21.75ms
2026-01-15 07:16:08,035 - uvicorn.access - INFO - 127.0.0.1:59276 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 07:17:44,397 - app - ERROR - Request failed: GET /api/v1/crypto-payments/currencies - Duration: 5122.54ms - Error: 
2026-01-15 07:17:44,407 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 36, in get_available_currencies
    currencies = await service.get_available_currencies()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 48, in get_available_currencies
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-15 07:17:44,408 - uvicorn.access - INFO - 127.0.0.1:39938 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 500
2026-01-15 07:17:44,454 - app - ERROR - Request failed: GET /api/v1/crypto-payments/estimate - Duration: 5179.42ms - Error: 
2026-01-15 07:17:44,461 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 67, in get_estimated_price
    return await service.get_estimated_price(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 95, in get_estimated_price
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-15 07:17:44,461 - uvicorn.access - INFO - 127.0.0.1:39944 - "GET /api/v1/crypto-payments/estimate?amount=3590&currency_from=usd&currency_to=btc HTTP/1.1" 500
2026-01-15 07:17:44,957 - app - INFO - Request: GET /api/v1/crypto-payments/currencies - Status: 200 - Duration: 539.67ms
2026-01-15 07:17:44,957 - uvicorn.access - INFO - 127.0.0.1:56510 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 200
2026-01-15 07:17:45,013 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 538.20ms
2026-01-15 07:17:45,013 - uvicorn.access - INFO - 127.0.0.1:56516 - "GET /api/v1/crypto-payments/estimate?amount=3590&currency_from=usd&currency_to=btc HTTP/1.1" 200
2026-01-15 07:17:55,345 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 16.08ms
2026-01-15 07:17:55,345 - uvicorn.access - INFO - 127.0.0.1:37926 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 07:17:55,408 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 34.95ms
2026-01-15 07:17:55,408 - uvicorn.access - INFO - 127.0.0.1:37930 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 07:17:56,216 - app - ERROR - Request failed: POST /api/v1/crypto-payments/invoice - Duration: 785.99ms - Error: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined
2026-01-15 07:17:56,230 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 413, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<9 lines>...
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 244, in serialize_response
    |     value, errors_ = field.validate(response_content, {}, loc=("response",))
    |                      ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/v2.py", line 115, in validate
    |     self._type_adapter.validate_python(value, from_attributes=True),
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/type_adapter.py", line 441, in validate_python
    |     return self.validator.validate_python(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 100, in __getattr__
    |     raise PydanticUserError(self._error_message, code=self._code)
    | pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.
    | 
    | For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 244, in serialize_response
    value, errors_ = field.validate(response_content, {}, loc=("response",))
                     ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/_compat/v2.py", line 115, in validate
    self._type_adapter.validate_python(value, from_attributes=True),
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/type_adapter.py", line 441, in validate_python
    return self.validator.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/pydantic/_internal/_mock_val_ser.py", line 100, in __getattr__
    raise PydanticUserError(self._error_message, code=self._code)
pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]]` is not fully defined; you should define `typing.Annotated[app.schema.crypto_payment.CryptoPaymentRead, FieldInfo(annotation=CryptoPaymentRead, required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.12/u/class-not-fully-defined

2026-01-15 07:17:56,230 - uvicorn.access - INFO - 127.0.0.1:37946 - "POST /api/v1/crypto-payments/invoice HTTP/1.1" 500
2026-01-15 07:19:07,206 - uvicorn.error - INFO - Shutting down
2026-01-15 07:19:07,307 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 07:19:07,308 - app - INFO - Shutting down application...
2026-01-15 07:19:07,308 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 07:19:07,308 - uvicorn.error - INFO - Finished server process [79392]
2026-01-15 07:19:09,148 - uvicorn.error - INFO - Started server process [84525]
2026-01-15 07:19:09,149 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 07:19:09,149 - app - INFO - Starting up application...
2026-01-15 07:19:09,158 - uvicorn.error - INFO - Application startup complete.
2026-01-15 07:19:10,065 - uvicorn.error - INFO - Shutting down
2026-01-15 07:19:10,165 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 07:19:10,166 - app - INFO - Shutting down application...
2026-01-15 07:19:10,166 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 07:19:10,166 - uvicorn.error - INFO - Finished server process [84525]
2026-01-15 07:19:11,623 - uvicorn.error - INFO - Started server process [84587]
2026-01-15 07:19:11,624 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 07:19:11,624 - app - INFO - Starting up application...
2026-01-15 07:19:11,632 - uvicorn.error - INFO - Application startup complete.
2026-01-15 07:19:26,161 - app - INFO - Root endpoint accessed
2026-01-15 07:19:26,162 - app - INFO - Request: GET / - Status: 200 - Duration: 1.86ms
2026-01-15 07:19:26,162 - uvicorn.access - INFO - 127.0.0.1:41746 - "GET / HTTP/1.1" 200
2026-01-15 07:19:29,016 - app - INFO - Request: GET /openapi.json - Status: 200 - Duration: 166.23ms
2026-01-15 07:19:29,016 - uvicorn.access - INFO - 127.0.0.1:41754 - "GET /openapi.json HTTP/1.1" 200
2026-01-15 07:20:27,241 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 127.51ms
2026-01-15 07:20:27,242 - uvicorn.access - INFO - 127.0.0.1:42644 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 07:20:27,393 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 110.29ms
2026-01-15 07:20:27,395 - uvicorn.access - INFO - 127.0.0.1:42656 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 07:20:28,268 - app - INFO - Request: POST /api/v1/crypto-payments/invoice - Status: 200 - Duration: 808.74ms
2026-01-15 07:20:28,269 - uvicorn.access - INFO - 127.0.0.1:42660 - "POST /api/v1/crypto-payments/invoice HTTP/1.1" 200
2026-01-15 08:08:00,583 - uvicorn.error - INFO - Shutting down
2026-01-15 08:08:00,684 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:08:00,684 - app - INFO - Shutting down application...
2026-01-15 08:08:00,684 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:08:00,684 - uvicorn.error - INFO - Finished server process [84587]
2026-01-15 08:08:02,495 - uvicorn.error - INFO - Started server process [113950]
2026-01-15 08:08:02,496 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:08:02,498 - app - INFO - Starting up application...
2026-01-15 08:08:02,516 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:08:03,018 - uvicorn.error - INFO - Shutting down
2026-01-15 08:08:03,119 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:08:03,119 - app - INFO - Shutting down application...
2026-01-15 08:08:03,120 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:08:03,120 - uvicorn.error - INFO - Finished server process [113950]
2026-01-15 08:08:04,862 - uvicorn.error - INFO - Started server process [114028]
2026-01-15 08:08:04,863 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:08:04,864 - app - INFO - Starting up application...
2026-01-15 08:08:04,872 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:08:18,948 - uvicorn.error - INFO - Shutting down
2026-01-15 08:08:19,048 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:08:19,048 - app - INFO - Shutting down application...
2026-01-15 08:08:19,049 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:08:19,049 - uvicorn.error - INFO - Finished server process [114028]
2026-01-15 08:08:20,515 - uvicorn.error - INFO - Started server process [114298]
2026-01-15 08:08:20,517 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:08:20,518 - app - INFO - Starting up application...
2026-01-15 08:08:20,561 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:08:22,868 - uvicorn.error - INFO - Shutting down
2026-01-15 08:08:22,969 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:08:22,969 - app - INFO - Shutting down application...
2026-01-15 08:08:22,970 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:08:22,970 - uvicorn.error - INFO - Finished server process [114298]
2026-01-15 08:08:25,007 - uvicorn.error - INFO - Started server process [114375]
2026-01-15 08:08:25,008 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:08:25,008 - app - INFO - Starting up application...
2026-01-15 08:08:25,019 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:08:45,193 - uvicorn.error - INFO - Shutting down
2026-01-15 08:08:45,294 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:08:45,294 - app - INFO - Shutting down application...
2026-01-15 08:08:45,295 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:08:45,295 - uvicorn.error - INFO - Finished server process [114375]
2026-01-15 08:08:47,015 - uvicorn.error - INFO - Started server process [114710]
2026-01-15 08:08:47,015 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:08:47,016 - app - INFO - Starting up application...
2026-01-15 08:08:47,029 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:09:01,997 - uvicorn.error - INFO - Shutting down
2026-01-15 08:09:02,099 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:09:02,101 - app - INFO - Shutting down application...
2026-01-15 08:09:02,102 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:09:02,102 - uvicorn.error - INFO - Finished server process [114710]
2026-01-15 08:09:03,812 - uvicorn.error - INFO - Started server process [114965]
2026-01-15 08:09:03,813 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:09:03,813 - app - INFO - Starting up application...
2026-01-15 08:09:03,821 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:10:05,577 - uvicorn.error - INFO - Shutting down
2026-01-15 08:10:05,680 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:10:05,681 - app - INFO - Shutting down application...
2026-01-15 08:10:05,681 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:10:05,681 - uvicorn.error - INFO - Finished server process [114965]
2026-01-15 08:10:07,653 - uvicorn.error - INFO - Started server process [115900]
2026-01-15 08:10:07,654 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:10:07,654 - app - INFO - Starting up application...
2026-01-15 08:10:07,684 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:10:21,132 - uvicorn.error - INFO - Shutting down
2026-01-15 08:10:21,233 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:10:21,234 - app - INFO - Shutting down application...
2026-01-15 08:10:21,234 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:10:21,234 - uvicorn.error - INFO - Finished server process [115900]
2026-01-15 08:10:23,361 - uvicorn.error - INFO - Started server process [116203]
2026-01-15 08:10:23,364 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:10:23,367 - app - INFO - Starting up application...
2026-01-15 08:10:23,430 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:10:27,964 - uvicorn.error - INFO - Shutting down
2026-01-15 08:10:28,065 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:10:28,067 - app - INFO - Shutting down application...
2026-01-15 08:10:28,067 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:10:28,067 - uvicorn.error - INFO - Finished server process [116203]
2026-01-15 08:10:29,898 - uvicorn.error - INFO - Started server process [116339]
2026-01-15 08:10:29,899 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:10:29,899 - app - INFO - Starting up application...
2026-01-15 08:10:29,907 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:11:01,546 - uvicorn.error - INFO - Shutting down
2026-01-15 08:11:01,649 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:11:01,649 - app - INFO - Shutting down application...
2026-01-15 08:11:01,649 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:11:01,652 - uvicorn.error - INFO - Finished server process [116339]
2026-01-15 08:11:05,434 - uvicorn.error - INFO - Started server process [116868]
2026-01-15 08:11:05,435 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:11:05,437 - app - INFO - Starting up application...
2026-01-15 08:11:05,452 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:12:07,092 - uvicorn.error - INFO - Shutting down
2026-01-15 08:12:07,195 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:12:07,196 - app - INFO - Shutting down application...
2026-01-15 08:12:07,196 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:12:07,197 - uvicorn.error - INFO - Finished server process [116868]
2026-01-15 08:12:09,379 - uvicorn.error - INFO - Started server process [117928]
2026-01-15 08:12:09,380 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:12:09,380 - app - INFO - Starting up application...
2026-01-15 08:12:09,391 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:12:10,700 - uvicorn.error - INFO - Shutting down
2026-01-15 08:12:10,802 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 08:12:10,802 - app - INFO - Shutting down application...
2026-01-15 08:12:10,803 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 08:12:10,803 - uvicorn.error - INFO - Finished server process [117928]
2026-01-15 08:12:12,379 - uvicorn.error - INFO - Started server process [118007]
2026-01-15 08:12:12,380 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 08:12:12,380 - app - INFO - Starting up application...
2026-01-15 08:12:12,388 - uvicorn.error - INFO - Application startup complete.
2026-01-15 08:14:22,831 - app - INFO - Request: GET /api/v1/notifications/unread-count - Status: 401 - Duration: 2.97ms
2026-01-15 08:14:22,831 - uvicorn.access - INFO - 127.0.0.1:38730 - "GET /api/v1/notifications/unread-count HTTP/1.1" 401
2026-01-15 10:59:21,371 - app - INFO - Request: POST /api/v1/auth/login/access-token - Status: 200 - Duration: 513.45ms
2026-01-15 10:59:21,372 - uvicorn.access - INFO - 127.0.0.1:60444 - "POST /api/v1/auth/login/access-token HTTP/1.1" 200
2026-01-15 10:59:24,366 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 139.94ms
2026-01-15 10:59:24,366 - uvicorn.access - INFO - 127.0.0.1:60448 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 10:59:24,411 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 21.75ms
2026-01-15 10:59:24,411 - uvicorn.access - INFO - 127.0.0.1:60462 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 10:59:24,431 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 36.23ms
2026-01-15 10:59:24,431 - uvicorn.access - INFO - 127.0.0.1:60468 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 10:59:24,480 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 32.27ms
2026-01-15 10:59:24,481 - uvicorn.access - INFO - 127.0.0.1:60470 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 10:59:28,214 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 16.70ms
2026-01-15 10:59:28,214 - uvicorn.access - INFO - 127.0.0.1:32868 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 10:59:28,266 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 33.54ms
2026-01-15 10:59:28,266 - uvicorn.access - INFO - 127.0.0.1:32874 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 11:00:43,791 - app - ERROR - Request failed: GET /api/v1/crypto-payments/currencies - Duration: 5145.14ms - Error: 
2026-01-15 11:00:43,807 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 36, in get_available_currencies
    currencies = await service.get_available_currencies()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 48, in get_available_currencies
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-15 11:00:43,807 - uvicorn.access - INFO - 127.0.0.1:58584 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 500
2026-01-15 11:00:43,858 - app - ERROR - Request failed: GET /api/v1/crypto-payments/estimate - Duration: 5212.32ms - Error: 
2026-01-15 11:00:43,868 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 67, in get_estimated_price
    return await service.get_estimated_price(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 95, in get_estimated_price
    response = await client.get(
               ^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1768, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-15 11:00:43,868 - uvicorn.access - INFO - 127.0.0.1:58586 - "GET /api/v1/crypto-payments/estimate?amount=3590&currency_from=usd&currency_to=btc HTTP/1.1" 500
2026-01-15 11:00:44,314 - app - INFO - Request: GET /api/v1/crypto-payments/currencies - Status: 200 - Duration: 499.61ms
2026-01-15 11:00:44,314 - uvicorn.access - INFO - 127.0.0.1:58594 - "GET /api/v1/crypto-payments/currencies HTTP/1.1" 200
2026-01-15 11:00:44,455 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 574.72ms
2026-01-15 11:00:44,455 - uvicorn.access - INFO - 127.0.0.1:58600 - "GET /api/v1/crypto-payments/estimate?amount=3590&currency_from=usd&currency_to=btc HTTP/1.1" 200
2026-01-15 11:00:48,379 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 783.98ms
2026-01-15 11:00:48,379 - uvicorn.access - INFO - 127.0.0.1:58610 - "GET /api/v1/crypto-payments/estimate?amount=3590&currency_from=usd&currency_to=usdtbsc HTTP/1.1" 200
2026-01-15 11:01:08,241 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 520.71ms
2026-01-15 11:01:08,241 - uvicorn.access - INFO - 127.0.0.1:41620 - "GET /api/v1/crypto-payments/estimate?amount=3590&currency_from=usd&currency_to=usdcarc20 HTTP/1.1" 200
2026-01-15 11:01:10,672 - app - INFO - Request: GET /api/v1/crypto-payments/estimate - Status: 200 - Duration: 512.63ms
2026-01-15 11:01:10,672 - uvicorn.access - INFO - 127.0.0.1:59540 - "GET /api/v1/crypto-payments/estimate?amount=3590&currency_from=usd&currency_to=lnq HTTP/1.1" 200
2026-01-15 11:01:16,396 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 21.43ms
2026-01-15 11:01:16,397 - uvicorn.access - INFO - 127.0.0.1:59554 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 11:01:16,452 - app - ERROR - Request failed: POST /api/v1/prop-firm - Duration: 23.83ms - Error: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 11:01:16,482 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/prop_firm.py", line 29, in create_propfirm_registration
    |     user_id=current_user.id,
    |             ^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    |     return self.impl.get(state, dict_)  # type: ignore[no-any-return]
    |            ~~~~~~~~~~~~~^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    |     value = self._fire_loader_callables(state, key, passive)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    |     return state._load_expired(state, passive)
    |            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 803, in _load_expired
    |     self.manager.expired_attribute_loader(self, toload, passive)
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    |     result = load_on_ident(
    |         session,
    |     ...<4 lines>...
    |         no_autoflush=no_autoflush,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    |     return load_on_pk_identity(
    |         session,
    |     ...<11 lines>...
    |         is_user_refresh=is_user_refresh,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    |     session.execute(
    |     ~~~~~~~~~~~~~~~^
    |         q,
    |         ^^
    |     ...<2 lines>...
    |         bind_arguments=bind_arguments,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    |     return super().execute(
    |            ~~~~~~~~~~~~~~~^
    |         statement,
    |         ^^^^^^^^^^
    |     ...<4 lines>...
    |         _add_event=_add_event,
    |         ^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    |     return self._execute_internal(
    |            ~~~~~~~~~~~~~~~~~~~~~~^
    |         statement,
    |         ^^^^^^^^^^
    |     ...<4 lines>...
    |         _add_event=_add_event,
    |         ^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    |     result: Result[Any] = compile_state_cls.orm_execute_statement(
    |                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         self,
    |         ^^^^^
    |     ...<4 lines>...
    |         conn,
    |         ^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    |     result = conn.execute(
    |         statement, params or {}, execution_options=execution_options
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    |     return meth(
    |         self,
    |         distilled_parameters,
    |         execution_options or NO_OPTIONS,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    |     return connection._execute_clauseelement(
    |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         self, distilled_params, execution_options
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    |     ret = self._execute_context(
    |         dialect,
    |     ...<8 lines>...
    |         cache_hit=cache_hit,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    |     return self._exec_single_context(
    |            ~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         dialect, context, statement, parameters
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    |     self._handle_dbapi_exception(
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         e, str_statement, effective_parameters, cursor, context
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2358, in _handle_dbapi_exception
    |     raise exc_info[1].with_traceback(exc_info[2])
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    |     self.dialect.do_execute(
    |     ~~~~~~~~~~~~~~~~~~~~~~~^
    |         cursor, str_statement, effective_parameters, context
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    |     cursor.execute(statement, parameters)
    |     ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    |     self._adapt_connection._handle_exception(error)
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    |     raise error
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 157, in execute
    |     _cursor: AsyncIODBAPICursor = self.await_(self._connection.cursor())  # type: ignore[arg-type] # noqa: E501
    |                                   ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    |     raise exc.MissingGreenlet(
    |     ...<2 lines>...
    |     )
    | sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/prop_firm.py", line 29, in create_propfirm_registration
    user_id=current_user.id,
            ^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 803, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
        session,
    ...<4 lines>...
        no_autoflush=no_autoflush,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
        session,
    ...<11 lines>...
        is_user_refresh=is_user_refresh,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
    ~~~~~~~~~~~~~~~^
        q,
        ^^
    ...<2 lines>...
        bind_arguments=bind_arguments,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2358, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 157, in execute
    _cursor: AsyncIODBAPICursor = self.await_(self._connection.cursor())  # type: ignore[arg-type] # noqa: E501
                                  ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
    ...<2 lines>...
    )
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

2026-01-15 11:01:16,483 - uvicorn.access - INFO - 127.0.0.1:59560 - "POST /api/v1/prop-firm HTTP/1.1" 500
2026-01-15 11:03:14,481 - app - INFO - Root endpoint accessed
2026-01-15 11:03:14,486 - app - INFO - Request: GET / - Status: 200 - Duration: 8.09ms
2026-01-15 11:03:14,488 - uvicorn.access - INFO - 127.0.0.1:36526 - "GET / HTTP/1.1" 200
2026-01-15 11:05:28,550 - uvicorn.error - INFO - Shutting down
2026-01-15 11:05:28,657 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 11:05:28,657 - app - INFO - Shutting down application...
2026-01-15 11:05:28,657 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 11:05:28,658 - uvicorn.error - INFO - Finished server process [118007]
2026-01-15 11:05:33,888 - uvicorn.error - INFO - Started server process [203113]
2026-01-15 11:05:33,888 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 11:05:33,891 - app - INFO - Starting up application...
2026-01-15 11:05:33,906 - uvicorn.error - INFO - Application startup complete.
2026-01-15 11:05:52,631 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 115.61ms
2026-01-15 11:05:52,632 - uvicorn.access - INFO - 127.0.0.1:41150 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 11:05:52,919 - app - ERROR - Request failed: POST /api/v1/prop-firm - Duration: 104.00ms - Error: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 11:05:53,063 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/prop_firm.py", line 36, in create_propfirm_registration
    |     user_id=current_user.id,
    |             ^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    |     return self.impl.get(state, dict_)  # type: ignore[no-any-return]
    |            ~~~~~~~~~~~~~^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    |     value = self._fire_loader_callables(state, key, passive)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    |     return state._load_expired(state, passive)
    |            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 803, in _load_expired
    |     self.manager.expired_attribute_loader(self, toload, passive)
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    |     result = load_on_ident(
    |         session,
    |     ...<4 lines>...
    |         no_autoflush=no_autoflush,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    |     return load_on_pk_identity(
    |         session,
    |     ...<11 lines>...
    |         is_user_refresh=is_user_refresh,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    |     session.execute(
    |     ~~~~~~~~~~~~~~~^
    |         q,
    |         ^^
    |     ...<2 lines>...
    |         bind_arguments=bind_arguments,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    |     return super().execute(
    |            ~~~~~~~~~~~~~~~^
    |         statement,
    |         ^^^^^^^^^^
    |     ...<4 lines>...
    |         _add_event=_add_event,
    |         ^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    |     return self._execute_internal(
    |            ~~~~~~~~~~~~~~~~~~~~~~^
    |         statement,
    |         ^^^^^^^^^^
    |     ...<4 lines>...
    |         _add_event=_add_event,
    |         ^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    |     result: Result[Any] = compile_state_cls.orm_execute_statement(
    |                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         self,
    |         ^^^^^
    |     ...<4 lines>...
    |         conn,
    |         ^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    |     result = conn.execute(
    |         statement, params or {}, execution_options=execution_options
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    |     return meth(
    |         self,
    |         distilled_parameters,
    |         execution_options or NO_OPTIONS,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    |     return connection._execute_clauseelement(
    |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         self, distilled_params, execution_options
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    |     ret = self._execute_context(
    |         dialect,
    |     ...<8 lines>...
    |         cache_hit=cache_hit,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    |     return self._exec_single_context(
    |            ~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         dialect, context, statement, parameters
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    |     self._handle_dbapi_exception(
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         e, str_statement, effective_parameters, cursor, context
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2358, in _handle_dbapi_exception
    |     raise exc_info[1].with_traceback(exc_info[2])
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    |     self.dialect.do_execute(
    |     ~~~~~~~~~~~~~~~~~~~~~~~^
    |         cursor, str_statement, effective_parameters, context
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    |     cursor.execute(statement, parameters)
    |     ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    |     self._adapt_connection._handle_exception(error)
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    |     raise error
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 157, in execute
    |     _cursor: AsyncIODBAPICursor = self.await_(self._connection.cursor())  # type: ignore[arg-type] # noqa: E501
    |                                   ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    |     raise exc.MissingGreenlet(
    |     ...<2 lines>...
    |     )
    | sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/prop_firm.py", line 36, in create_propfirm_registration
    user_id=current_user.id,
            ^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 803, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
        session,
    ...<4 lines>...
        no_autoflush=no_autoflush,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
        session,
    ...<11 lines>...
        is_user_refresh=is_user_refresh,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
    ~~~~~~~~~~~~~~~^
        q,
        ^^
    ...<2 lines>...
        bind_arguments=bind_arguments,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2358, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 157, in execute
    _cursor: AsyncIODBAPICursor = self.await_(self._connection.cursor())  # type: ignore[arg-type] # noqa: E501
                                  ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
    ...<2 lines>...
    )
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

2026-01-15 11:05:53,074 - uvicorn.access - INFO - 127.0.0.1:41164 - "POST /api/v1/prop-firm HTTP/1.1" 500
2026-01-15 11:11:18,735 - uvicorn.error - INFO - Shutting down
2026-01-15 11:11:18,837 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 11:11:18,838 - app - INFO - Shutting down application...
2026-01-15 11:11:18,838 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 11:11:18,838 - uvicorn.error - INFO - Finished server process [203113]
2026-01-15 11:11:22,699 - uvicorn.error - INFO - Started server process [208008]
2026-01-15 11:11:22,700 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 11:11:22,700 - app - INFO - Starting up application...
2026-01-15 11:11:22,708 - uvicorn.error - INFO - Application startup complete.
2026-01-15 11:11:25,271 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 64.12ms
2026-01-15 11:11:25,272 - uvicorn.access - INFO - 127.0.0.1:33608 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 11:11:25,349 - app - ERROR - Request failed: POST /api/v1/prop-firm - Duration: 47.39ms - Error: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 11:11:25,379 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/prop_firm.py", line 36, in create_propfirm_registration
    |     user_id=current_user.id,
    |             ^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    |     return self.impl.get(state, dict_)  # type: ignore[no-any-return]
    |            ~~~~~~~~~~~~~^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    |     value = self._fire_loader_callables(state, key, passive)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    |     return state._load_expired(state, passive)
    |            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 803, in _load_expired
    |     self.manager.expired_attribute_loader(self, toload, passive)
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    |     result = load_on_ident(
    |         session,
    |     ...<4 lines>...
    |         no_autoflush=no_autoflush,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    |     return load_on_pk_identity(
    |         session,
    |     ...<11 lines>...
    |         is_user_refresh=is_user_refresh,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    |     session.execute(
    |     ~~~~~~~~~~~~~~~^
    |         q,
    |         ^^
    |     ...<2 lines>...
    |         bind_arguments=bind_arguments,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    |     return super().execute(
    |            ~~~~~~~~~~~~~~~^
    |         statement,
    |         ^^^^^^^^^^
    |     ...<4 lines>...
    |         _add_event=_add_event,
    |         ^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    |     return self._execute_internal(
    |            ~~~~~~~~~~~~~~~~~~~~~~^
    |         statement,
    |         ^^^^^^^^^^
    |     ...<4 lines>...
    |         _add_event=_add_event,
    |         ^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    |     result: Result[Any] = compile_state_cls.orm_execute_statement(
    |                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         self,
    |         ^^^^^
    |     ...<4 lines>...
    |         conn,
    |         ^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    |     result = conn.execute(
    |         statement, params or {}, execution_options=execution_options
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    |     return meth(
    |         self,
    |         distilled_parameters,
    |         execution_options or NO_OPTIONS,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    |     return connection._execute_clauseelement(
    |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         self, distilled_params, execution_options
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    |     ret = self._execute_context(
    |         dialect,
    |     ...<8 lines>...
    |         cache_hit=cache_hit,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    |     return self._exec_single_context(
    |            ~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         dialect, context, statement, parameters
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    |     self._handle_dbapi_exception(
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         e, str_statement, effective_parameters, cursor, context
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2358, in _handle_dbapi_exception
    |     raise exc_info[1].with_traceback(exc_info[2])
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    |     self.dialect.do_execute(
    |     ~~~~~~~~~~~~~~~~~~~~~~~^
    |         cursor, str_statement, effective_parameters, context
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    |     cursor.execute(statement, parameters)
    |     ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    |     self._adapt_connection._handle_exception(error)
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    |     raise error
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 157, in execute
    |     _cursor: AsyncIODBAPICursor = self.await_(self._connection.cursor())  # type: ignore[arg-type] # noqa: E501
    |                                   ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    |     raise exc.MissingGreenlet(
    |     ...<2 lines>...
    |     )
    | sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/prop_firm.py", line 36, in create_propfirm_registration
    user_id=current_user.id,
            ^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 803, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
        session,
    ...<4 lines>...
        no_autoflush=no_autoflush,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
        session,
    ...<11 lines>...
        is_user_refresh=is_user_refresh,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
    ~~~~~~~~~~~~~~~^
        q,
        ^^
    ...<2 lines>...
        bind_arguments=bind_arguments,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2358, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 157, in execute
    _cursor: AsyncIODBAPICursor = self.await_(self._connection.cursor())  # type: ignore[arg-type] # noqa: E501
                                  ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
    ...<2 lines>...
    )
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

2026-01-15 11:11:25,380 - uvicorn.access - INFO - 127.0.0.1:33624 - "POST /api/v1/prop-firm HTTP/1.1" 500
2026-01-15 11:11:27,017 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 17.58ms
2026-01-15 11:11:27,017 - uvicorn.access - INFO - 127.0.0.1:33630 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 11:11:27,060 - app - ERROR - Request failed: POST /api/v1/prop-firm - Duration: 22.38ms - Error: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 11:11:27,076 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/prop_firm.py", line 36, in create_propfirm_registration
    |     user_id=current_user.id,
    |             ^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    |     return self.impl.get(state, dict_)  # type: ignore[no-any-return]
    |            ~~~~~~~~~~~~~^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    |     value = self._fire_loader_callables(state, key, passive)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    |     return state._load_expired(state, passive)
    |            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 803, in _load_expired
    |     self.manager.expired_attribute_loader(self, toload, passive)
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    |     result = load_on_ident(
    |         session,
    |     ...<4 lines>...
    |         no_autoflush=no_autoflush,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    |     return load_on_pk_identity(
    |         session,
    |     ...<11 lines>...
    |         is_user_refresh=is_user_refresh,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    |     session.execute(
    |     ~~~~~~~~~~~~~~~^
    |         q,
    |         ^^
    |     ...<2 lines>...
    |         bind_arguments=bind_arguments,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    |     return super().execute(
    |            ~~~~~~~~~~~~~~~^
    |         statement,
    |         ^^^^^^^^^^
    |     ...<4 lines>...
    |         _add_event=_add_event,
    |         ^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    |     return self._execute_internal(
    |            ~~~~~~~~~~~~~~~~~~~~~~^
    |         statement,
    |         ^^^^^^^^^^
    |     ...<4 lines>...
    |         _add_event=_add_event,
    |         ^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    |     result: Result[Any] = compile_state_cls.orm_execute_statement(
    |                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         self,
    |         ^^^^^
    |     ...<4 lines>...
    |         conn,
    |         ^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    |     result = conn.execute(
    |         statement, params or {}, execution_options=execution_options
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    |     return meth(
    |         self,
    |         distilled_parameters,
    |         execution_options or NO_OPTIONS,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    |     return connection._execute_clauseelement(
    |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         self, distilled_params, execution_options
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    |     ret = self._execute_context(
    |         dialect,
    |     ...<8 lines>...
    |         cache_hit=cache_hit,
    |     )
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    |     return self._exec_single_context(
    |            ~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         dialect, context, statement, parameters
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    |     self._handle_dbapi_exception(
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
    |         e, str_statement, effective_parameters, cursor, context
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2358, in _handle_dbapi_exception
    |     raise exc_info[1].with_traceback(exc_info[2])
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    |     self.dialect.do_execute(
    |     ~~~~~~~~~~~~~~~~~~~~~~~^
    |         cursor, str_statement, effective_parameters, context
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    |     cursor.execute(statement, parameters)
    |     ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    |     self._adapt_connection._handle_exception(error)
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    |     raise error
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 157, in execute
    |     _cursor: AsyncIODBAPICursor = self.await_(self._connection.cursor())  # type: ignore[arg-type] # noqa: E501
    |                                   ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    |     raise exc.MissingGreenlet(
    |     ...<2 lines>...
    |     )
    | sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/prop_firm.py", line 36, in create_propfirm_registration
    user_id=current_user.id,
            ^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 803, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
        session,
    ...<4 lines>...
        no_autoflush=no_autoflush,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
        session,
    ...<11 lines>...
        is_user_refresh=is_user_refresh,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
    ~~~~~~~~~~~~~~~^
        q,
        ^^
    ...<2 lines>...
        bind_arguments=bind_arguments,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 144, in execute
    return super().execute(
           ~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2358, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 340, in _handle_exception
    raise error
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 157, in execute
    _cursor: AsyncIODBAPICursor = self.await_(self._connection.cursor())  # type: ignore[arg-type] # noqa: E501
                                  ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
    ...<2 lines>...
    )
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

2026-01-15 11:11:27,079 - uvicorn.access - INFO - 127.0.0.1:33646 - "POST /api/v1/prop-firm HTTP/1.1" 500
2026-01-15 11:12:32,478 - uvicorn.error - INFO - Shutting down
2026-01-15 11:12:32,582 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 11:12:32,582 - app - INFO - Shutting down application...
2026-01-15 11:12:32,582 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 11:12:32,582 - uvicorn.error - INFO - Finished server process [208008]
2026-01-15 11:12:35,269 - uvicorn.error - INFO - Started server process [209031]
2026-01-15 11:12:35,270 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 11:12:35,271 - app - INFO - Starting up application...
2026-01-15 11:12:35,291 - uvicorn.error - INFO - Application startup complete.
2026-01-15 11:13:07,874 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 259.27ms
2026-01-15 11:13:07,877 - uvicorn.access - INFO - 127.0.0.1:58092 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 11:13:08,098 - app - ERROR - Request failed: POST /api/v1/prop-firm - Duration: 170.96ms - Error: 21 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'login_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'password'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_website_link'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'server_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'server_type'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'challenges_step'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_account_cost'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_size'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_phases'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'trading_platform'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_rules'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'whatsapp_no'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'telegram_username'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'payment_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'user_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'order_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'created_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'updated_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

2026-01-15 11:13:08,143 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 413, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<9 lines>...
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 254, in serialize_response
    |     raise ResponseValidationError(
    |         errors=_normalize_errors(errors), body=response_content
    |     )
    | fastapi.exceptions.ResponseValidationError: 21 validation errors:
    |   {'type': 'get_attribute_error', 'loc': ('response', 'login_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'password'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_website_link'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'server_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'server_type'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'challenges_step'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_account_cost'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'account_size'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'account_phases'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'trading_platform'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_rules'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'whatsapp_no'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'telegram_username'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'account_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'payment_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'user_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'order_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'created_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'updated_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    | 
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 21 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'login_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'password'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_website_link'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'server_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'server_type'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'challenges_step'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_account_cost'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_size'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_phases'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'trading_platform'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_rules'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'whatsapp_no'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'telegram_username'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'payment_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'user_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'order_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'created_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'updated_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}


2026-01-15 11:13:08,156 - uvicorn.access - INFO - 127.0.0.1:58102 - "POST /api/v1/prop-firm HTTP/1.1" 500
2026-01-15 11:13:09,763 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 16.93ms
2026-01-15 11:13:09,764 - uvicorn.access - INFO - 127.0.0.1:46956 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 11:13:10,301 - app - ERROR - Request failed: POST /api/v1/prop-firm - Duration: 507.38ms - Error: 21 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'login_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'password'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_website_link'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'server_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'server_type'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'challenges_step'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_account_cost'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_size'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_phases'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'trading_platform'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_rules'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'whatsapp_no'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'telegram_username'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'payment_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'user_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'order_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'created_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'updated_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

2026-01-15 11:13:10,314 - app - ERROR -   + Exception Group Traceback (most recent call last):
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 815, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     )
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    |     await responder(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    |     await self.app(scope, receive, self.send_with_compression)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 413, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<9 lines>...
    |     )
    |     ^
    |   File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 254, in serialize_response
    |     raise ResponseValidationError(
    |         errors=_normalize_errors(errors), body=response_content
    |     )
    | fastapi.exceptions.ResponseValidationError: 21 validation errors:
    |   {'type': 'get_attribute_error', 'loc': ('response', 'login_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'password'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_website_link'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'server_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'server_type'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'challenges_step'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_account_cost'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'account_size'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'account_phases'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'trading_platform'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_rules'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'whatsapp_no'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'telegram_username'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'account_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'payment_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'user_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'order_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'created_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    |   {'type': 'get_attribute_error', 'loc': ('response', 'updated_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
    | 
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 21 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'login_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'password'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_website_link'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'server_name'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'server_type'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'challenges_step'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_account_cost'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_size'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_phases'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'trading_platform'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'propfirm_rules'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'whatsapp_no'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'telegram_username'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'account_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'payment_status'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'user_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'order_id'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'created_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'updated_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': PropFirmRegistration(), 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}


2026-01-15 11:13:10,328 - uvicorn.access - INFO - 127.0.0.1:46964 - "POST /api/v1/prop-firm HTTP/1.1" 500
2026-01-15 11:15:07,293 - uvicorn.error - INFO - Shutting down
2026-01-15 11:15:07,395 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 11:15:07,396 - app - INFO - Shutting down application...
2026-01-15 11:15:07,396 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 11:15:07,397 - uvicorn.error - INFO - Finished server process [209031]
2026-01-15 11:15:09,127 - uvicorn.error - INFO - Started server process [211174]
2026-01-15 11:15:09,128 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 11:15:09,128 - app - INFO - Starting up application...
2026-01-15 11:15:09,137 - uvicorn.error - INFO - Application startup complete.
2026-01-15 11:16:54,149 - uvicorn.error - INFO - Shutting down
2026-01-15 11:16:54,252 - uvicorn.error - INFO - Waiting for application shutdown.
2026-01-15 11:16:54,254 - app - INFO - Shutting down application...
2026-01-15 11:16:54,255 - uvicorn.error - INFO - Application shutdown complete.
2026-01-15 11:16:54,256 - uvicorn.error - INFO - Finished server process [211174]
2026-01-15 11:16:57,232 - uvicorn.error - INFO - Started server process [213437]
2026-01-15 11:16:57,233 - uvicorn.error - INFO - Waiting for application startup.
2026-01-15 11:16:57,233 - app - INFO - Starting up application...
2026-01-15 11:16:57,271 - uvicorn.error - INFO - Application startup complete.
2026-01-15 11:17:32,155 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 65.83ms
2026-01-15 11:17:32,155 - uvicorn.access - INFO - 127.0.0.1:52744 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 11:17:32,221 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 41.95ms
2026-01-15 11:17:32,221 - uvicorn.access - INFO - 127.0.0.1:52756 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 11:17:32,224 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 198, in __call__
    raise app_exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 198, in __call__
    raise app_exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 112, in app
    await response(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/responses.py", line 167, in __call__
    await self.background()
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/background.py", line 42, in __call__
    await task()
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/background.py", line 27, in __call__
    await self.func(*self.args, **self.kwargs)
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/prop_firm.py", line 17, in create_registration_notification
    from app.db.session import async_session_maker
ImportError: cannot import name 'async_session_maker' from 'app.db.session' (/home/rehack/PycharmProjects/solpro_backend/app/db/session.py)
2026-01-15 11:17:37,483 - app - ERROR - Request failed: POST /api/v1/crypto-payments/payment - Duration: 5234.37ms - Error: 
2026-01-15 11:17:37,498 - app - ERROR - Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rehack/PycharmProjects/solpro_backend/app/main.py", line 65, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/slowapi/middleware.py", line 136, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/crypto_payments.py", line 93, in create_payment
    return await service.create_payment(payment_data, current_user.id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/PycharmProjects/solpro_backend/app/service/nowpayments_service.py", line 147, in create_payment
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/rehack/anaconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

2026-01-15 11:17:37,498 - uvicorn.access - INFO - 127.0.0.1:52770 - "POST /api/v1/crypto-payments/payment HTTP/1.1" 500
2026-01-15 11:19:01,844 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 36.86ms
2026-01-15 11:19:01,846 - uvicorn.access - INFO - 127.0.0.1:39810 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 11:19:01,976 - app - INFO - Request: POST /api/v1/prop-firm - Status: 200 - Duration: 73.55ms
2026-01-15 11:19:01,977 - uvicorn.access - INFO - 127.0.0.1:39820 - "POST /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 11:19:01,983 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 198, in __call__
    raise app_exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 198, in __call__
    raise app_exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 36, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/fastapi/routing.py", line 112, in app
    await response(scope, receive, send)
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/responses.py", line 167, in __call__
    await self.background()
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/background.py", line 42, in __call__
    await task()
  File "/home/rehack/anaconda3/lib/python3.13/site-packages/starlette/background.py", line 27, in __call__
    await self.func(*self.args, **self.kwargs)
  File "/home/rehack/PycharmProjects/solpro_backend/app/api/v1/endpoints/prop_firm.py", line 17, in create_registration_notification
    from app.db.session import async_session_maker
ImportError: cannot import name 'async_session_maker' from 'app.db.session' (/home/rehack/PycharmProjects/solpro_backend/app/db/session.py)
2026-01-15 11:19:05,169 - app - INFO - Request: POST /api/v1/crypto-payments/payment - Status: 200 - Duration: 3144.23ms
2026-01-15 11:19:05,171 - uvicorn.access - INFO - 127.0.0.1:39832 - "POST /api/v1/crypto-payments/payment HTTP/1.1" 200
2026-01-15 11:19:17,792 - app - INFO - Request: GET /api/v1/crypto-payments/payment/4447228163/status - Status: 200 - Duration: 570.38ms
2026-01-15 11:19:17,795 - uvicorn.access - INFO - 127.0.0.1:57588 - "GET /api/v1/crypto-payments/payment/4447228163/status HTTP/1.1" 200
2026-01-15 11:19:29,173 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 74.65ms
2026-01-15 11:19:29,173 - uvicorn.access - INFO - 127.0.0.1:45042 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 11:19:29,297 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 47.45ms
2026-01-15 11:19:29,298 - uvicorn.access - INFO - 127.0.0.1:45050 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 11:19:29,326 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 51.07ms
2026-01-15 11:19:29,327 - uvicorn.access - INFO - 127.0.0.1:45066 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 11:19:29,389 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 33.08ms
2026-01-15 11:19:29,393 - uvicorn.access - INFO - 127.0.0.1:45078 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 11:19:32,651 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 20.21ms
2026-01-15 11:19:32,652 - uvicorn.access - INFO - 127.0.0.1:45086 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 11:19:32,720 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 34.55ms
2026-01-15 11:19:32,721 - uvicorn.access - INFO - 127.0.0.1:45092 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 11:19:33,648 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 44.85ms
2026-01-15 11:19:33,648 - uvicorn.access - INFO - 127.0.0.1:45108 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 11:19:33,749 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 65.00ms
2026-01-15 11:19:33,752 - uvicorn.access - INFO - 127.0.0.1:45120 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 11:19:55,864 - app - INFO - Request: GET /api/v1/users/referrals - Status: 200 - Duration: 13.51ms
2026-01-15 11:19:55,864 - uvicorn.access - INFO - 127.0.0.1:51464 - "GET /api/v1/users/referrals HTTP/1.1" 200
2026-01-15 11:19:55,888 - app - INFO - Request: GET /api/v1/users/referrals - Status: 200 - Duration: 12.07ms
2026-01-15 11:19:55,888 - uvicorn.access - INFO - 127.0.0.1:51474 - "GET /api/v1/users/referrals HTTP/1.1" 200
2026-01-15 11:20:01,132 - app - INFO - Request: GET /api/v1/users/me - Status: 200 - Duration: 17.18ms
2026-01-15 11:20:01,132 - uvicorn.access - INFO - 127.0.0.1:33384 - "GET /api/v1/users/me HTTP/1.1" 200
2026-01-15 11:20:01,166 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 18.91ms
2026-01-15 11:20:01,166 - uvicorn.access - INFO - 127.0.0.1:33392 - "GET /api/v1/prop-firm HTTP/1.1" 200
2026-01-15 11:20:04,338 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 8.60ms
2026-01-15 11:20:04,338 - uvicorn.access - INFO - 127.0.0.1:33402 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 11:20:04,434 - app - INFO - Request: GET /api/v1/prop-firm - Status: 200 - Duration: 79.65ms
2026-01-15 11:20:04,434 - uvicorn.access - INFO - 127.0.0.1:33404 - "GET /api/v1/prop-firm?status=passed HTTP/1.1" 200
2026-01-15 11:20:05,718 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 9.72ms
2026-01-15 11:20:05,718 - uvicorn.access - INFO - 127.0.0.1:33416 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 11:20:05,753 - app - INFO - Request: GET /api/v1/notifications/my-notifications - Status: 200 - Duration: 24.04ms
2026-01-15 11:20:05,754 - uvicorn.access - INFO - 127.0.0.1:33430 - "GET /api/v1/notifications/my-notifications HTTP/1.1" 200
2026-01-15 11:20:07,047 - app - INFO - Request: GET /api/v1/users/referrals - Status: 200 - Duration: 11.46ms
2026-01-15 11:20:07,047 - uvicorn.access - INFO - 127.0.0.1:33444 - "GET /api/v1/users/referrals HTTP/1.1" 200
2026-01-15 11:20:07,075 - app - INFO - Request: GET /api/v1/users/referrals - Status: 200 - Duration: 21.53ms
2026-01-15 11:20:07,075 - uvicorn.access - INFO - 127.0.0.1:33458 - "GET /api/v1/users/referrals HTTP/1.1" 200
